import{o as O,c as V,a as M,s as xo,q as Sn,d as Le,r as G,h as W,z as at,Y as ae,i as J,j as $,k as j,aP as _a,g as Xt,a6 as xn,w as B,b as I,a5 as Jt,aQ as Cn,ay as Q,az as ee,aA as oe,F as ba,S as Sa,f as ne,v as ie,aC as ht,K as xa,aR as wn,N as qe,a8 as Vt,m as Ca,V as wa,a9 as Co,G as Qt,aS as An,B as ot,aT as Pn,U as Tn,aU as Dn,aV as Ln,aW as In,u as wo,aw as On,C as Aa,a1 as kn,p as Ao,e as Po,aL as Mn,aX as Ee,a7 as Bn,R as Vn,A as Nn,aY as En}from"./index-8c4b8b6b.js";import{_ as k,S as To,B as ea,P as nt,G as be,c as ta,g as Je,C as Do,u as aa,L as Nt,a as zn,n as Lo,i as Io,e as P,b as Oo,d as ko,f as Pa,s as Rn,r as $n,h as F,t as Fn,j as Et,l as zt,k as Wn,m as oa,o as na,p as Mo,q as re,v as se,w as le,x as U,D as Bo,E as Gn,y as Vo,z as Un,A as Z,R as Rt,F as Ie,H as Zn,I as No,J as Hn,K as ue,M as Ta,N as jn,O as Kn,Q as Yn,T as ia,U as Fe,V as Eo,W as ft,X as qn,Y as we,Z as ge,$ as Xn,a0 as it,a1 as Jn,a2 as Qn,a3 as he,a4 as ei,a5 as We,a6 as Ae,a7 as Pe,a8 as Da,a9 as rt,aa as ti,ab as zo,ac as ai,ad as oi,ae as Ro,af as ni,ag as ii,ah as ri,ai as si,aj as $o,ak as me,al as ra,am as li,an as ui,ao as La,ap as Fo,aq as Ue,ar as Wo,as as Go,at as ci,au as di,av as pi,aw as hi,ax as Xe,ay as fi,az as Uo,aA as $t,aB as Ia,aC as vi,aD as vt,aE as gi,aF as mi,aG as yi,aH as _i,aI as bi,aJ as Si,aK as xi,aL as Ci,aM as Oa,aN as wi,aO as Ai,aP as Pi,aQ as Ti,aR as Di,aS as Li,aT as Ii,aU as Oi,aV as ki,aW as Mi,aX as Bi,aY as Vi,aZ as Ni,a_ as Ei,a$ as zi}from"./installCanvasRenderer-3ce2e16e.js";import{c as Ri,p as Zo,S as $i,i as Fi,t as Wi,r as Gi,a as Ui,D as Zi,b as Hi,d as ji,s as Ki,A as Yi,e as qi,f as Xi,g as Ji,h as Qi,j as er,k as tr,l as ar,m as or}from"./chartZoom-888b3aed.js";import{c as nr}from"./createSeriesDataSimply-71a90986.js";import{_ as Ho}from"./EditValue.vue_vue_type_script_setup_true_lang-838d2c31.js";var pe=(a=>(a.line="line",a.bar="bar",a.scatter="scatter",a))(pe||{});const gt={main_plot:{},subplots:{}};var ir=function(a){k(e,a);function e(){var t=a!==null&&a.apply(this,arguments)||this;return t.type=e.type,t.hasSymbolVisual=!0,t}return e.prototype.getInitialData=function(t,o){return Ri(null,this,{useEncodeDefaulter:!0})},e.prototype.getProgressive=function(){var t=this.option.progressive;return t??(this.option.large?5e3:this.get("progressive"))},e.prototype.getProgressiveThreshold=function(){var t=this.option.progressiveThreshold;return t??(this.option.large?1e4:this.get("progressiveThreshold"))},e.prototype.brushSelector=function(t,o,n){return n.point(o.getItemLayout(t))},e.prototype.getZLevelKey=function(){return this.getData().count()>this.getProgressiveThreshold()?this.id:""},e.type="series.scatter",e.dependencies=["grid","polar","geo","singleAxis","calendar"],e.defaultOption={coordinateSystem:"cartesian2d",z:2,legendHoverLink:!0,symbolSize:10,large:!1,largeThreshold:2e3,itemStyle:{opacity:.8},emphasis:{scale:!0},clip:!0,select:{itemStyle:{borderColor:"#212121"}},universalTransition:{divideShape:"clone"}},e}(To);const rr=ir;var jo=4,sr=function(){function a(){}return a}(),lr=function(a){k(e,a);function e(t){var o=a.call(this,t)||this;return o._off=0,o.hoverDataIdx=-1,o}return e.prototype.getDefaultShape=function(){return new sr},e.prototype.reset=function(){this.notClear=!1,this._off=0},e.prototype.buildPath=function(t,o){var n=o.points,i=o.size,r=this.symbolProxy,s=r.shape,l=t.getContext?t.getContext():t,u=l&&i[0]<jo,c=this.softClipShape,d;if(u){this._ctx=l;return}for(this._ctx=null,d=this._off;d<n.length;){var p=n[d++],m=n[d++];isNaN(p)||isNaN(m)||c&&!c.contain(p,m)||(s.x=p-i[0]/2,s.y=m-i[1]/2,s.width=i[0],s.height=i[1],r.buildPath(t,s,!0))}this.incremental&&(this._off=d,this.notClear=!0)},e.prototype.afterBrush=function(){var t=this.shape,o=t.points,n=t.size,i=this._ctx,r=this.softClipShape,s;if(i){for(s=this._off;s<o.length;){var l=o[s++],u=o[s++];isNaN(l)||isNaN(u)||r&&!r.contain(l,u)||i.fillRect(l-n[0]/2,u-n[1]/2,n[0],n[1])}this.incremental&&(this._off=s,this.notClear=!0)}},e.prototype.findDataIndex=function(t,o){for(var n=this.shape,i=n.points,r=n.size,s=Math.max(r[0],4),l=Math.max(r[1],4),u=i.length/2-1;u>=0;u--){var c=u*2,d=i[c]-s/2,p=i[c+1]-l/2;if(t>=d&&o>=p&&t<=d+s&&o<=p+l)return u}return-1},e.prototype.contain=function(t,o){var n=this.transformCoordToLocal(t,o),i=this.getBoundingRect();if(t=n[0],o=n[1],i.contain(t,o)){var r=this.hoverDataIdx=this.findDataIndex(t,o);return r>=0}return this.hoverDataIdx=-1,!1},e.prototype.getBoundingRect=function(){var t=this._rect;if(!t){for(var o=this.shape,n=o.points,i=o.size,r=i[0],s=i[1],l=1/0,u=1/0,c=-1/0,d=-1/0,p=0;p<n.length;){var m=n[p++],v=n[p++];l=Math.min(m,l),c=Math.max(m,c),u=Math.min(v,u),d=Math.max(v,d)}t=this._rect=new ea(l-r/2,u-s/2,c-l+r,d-u+s)}return t},e}(nt),ur=function(){function a(){this.group=new be}return a.prototype.updateData=function(e,t){this._clear();var o=this._create();o.setShape({points:e.getLayout("points")}),this._setCommon(o,e,t)},a.prototype.updateLayout=function(e){var t=e.getLayout("points");this.group.eachChild(function(o){if(o.startIndex!=null){var n=(o.endIndex-o.startIndex)*2,i=o.startIndex*4*2;t=new Float32Array(t.buffer,i,n)}o.setShape("points",t),o.reset()})},a.prototype.incrementalPrepareUpdate=function(e){this._clear()},a.prototype.incrementalUpdate=function(e,t,o){var n=this._newAdded[0],i=t.getLayout("points"),r=n&&n.shape.points;if(r&&r.length<2e4){var s=r.length,l=new Float32Array(s+i.length);l.set(r),l.set(i,s),n.endIndex=e.end,n.setShape({points:l})}else{this._newAdded=[];var u=this._create();u.startIndex=e.start,u.endIndex=e.end,u.incremental=!0,u.setShape({points:i}),this._setCommon(u,t,o)}},a.prototype.eachRendered=function(e){this._newAdded[0]&&e(this._newAdded[0])},a.prototype._create=function(){var e=new lr({cursor:"default"});return e.ignoreCoarsePointer=!0,this.group.add(e),this._newAdded.push(e),e},a.prototype._setCommon=function(e,t,o){var n=t.hostModel;o=o||{};var i=t.getVisual("symbolSize");e.setShape("size",i instanceof Array?i:[i,i]),e.softClipShape=o.clipShape||null,e.symbolProxy=ta(t.getVisual("symbol"),0,0,0,0),e.setColor=e.symbolProxy.setColor;var r=e.shape.size[0]<jo;e.useStyle(n.getModel("itemStyle").getItemStyle(r?["color","shadowBlur","shadowColor"]:["color"]));var s=t.getVisual("style"),l=s&&s.fill;l&&e.setColor(l);var u=Je(e);u.seriesIndex=n.seriesIndex,e.on("mousemove",function(c){u.dataIndex=null;var d=e.hoverDataIdx;d>=0&&(u.dataIndex=d+(e.startIndex||0))})},a.prototype.remove=function(){this._clear()},a.prototype._clear=function(){this._newAdded=[],this.group.removeAll()},a}();const cr=ur;var dr=function(a){k(e,a);function e(){var t=a!==null&&a.apply(this,arguments)||this;return t.type=e.type,t}return e.prototype.render=function(t,o,n){var i=t.getData(),r=this._updateSymbolDraw(i,t);r.updateData(i,{clipShape:this._getClipShape(t)}),this._finished=!0},e.prototype.incrementalPrepareRender=function(t,o,n){var i=t.getData(),r=this._updateSymbolDraw(i,t);r.incrementalPrepareUpdate(i),this._finished=!1},e.prototype.incrementalRender=function(t,o,n){this._symbolDraw.incrementalUpdate(t,o.getData(),{clipShape:this._getClipShape(o)}),this._finished=t.end===o.getData().count()},e.prototype.updateTransform=function(t,o,n){var i=t.getData();if(this.group.dirty(),!this._finished||i.count()>1e4)return{update:!0};var r=Zo("").reset(t,o,n);r.progress&&r.progress({start:0,end:i.count(),count:i.count()},i),this._symbolDraw.updateLayout(i)},e.prototype.eachRendered=function(t){this._symbolDraw&&this._symbolDraw.eachRendered(t)},e.prototype._getClipShape=function(t){var o=t.coordinateSystem,n=o&&o.getArea&&o.getArea();return t.get("clip",!0)?n:null},e.prototype._updateSymbolDraw=function(t,o){var n=this._symbolDraw,i=o.pipelineContext,r=i.large;return(!n||r!==this._isLargeDraw)&&(n&&n.remove(),n=this._symbolDraw=r?new cr:new $i,this._isLargeDraw=r,this.group.removeAll()),this.group.add(n.group),n},e.prototype.remove=function(t,o){this._symbolDraw&&this._symbolDraw.remove(!0),this._symbolDraw=null},e.prototype.dispose=function(){},e.type="scatter",e}(Do);const pr=dr;function hr(a){aa(Fi),a.registerSeriesModel(rr),a.registerChartView(pr),a.registerLayout(Zo("scatter"))}var fr={axisPointer:1,tooltip:1,brush:1};function vr(a,e,t){var o=e.getComponentByElement(a.topTarget),n=o&&o.coordinateSystem;return o&&o!==t&&!fr.hasOwnProperty(o.mainType)&&n&&n.model!==t}var ka=Nt.prototype,mt=zn.prototype,Ko=function(){function a(){this.x1=0,this.y1=0,this.x2=0,this.y2=0,this.percent=1}return a}();(function(a){k(e,a);function e(){return a!==null&&a.apply(this,arguments)||this}return e})(Ko);function yt(a){return isNaN(+a.cpx1)||isNaN(+a.cpy1)}var gr=function(a){k(e,a);function e(t){var o=a.call(this,t)||this;return o.type="ec-line",o}return e.prototype.getDefaultStyle=function(){return{stroke:"#000",fill:null}},e.prototype.getDefaultShape=function(){return new Ko},e.prototype.buildPath=function(t,o){yt(o)?ka.buildPath.call(this,t,o):mt.buildPath.call(this,t,o)},e.prototype.pointAt=function(t){return yt(this.shape)?ka.pointAt.call(this,t):mt.pointAt.call(this,t)},e.prototype.tangentAt=function(t){var o=this.shape,n=yt(o)?[o.x2-o.x1,o.y2-o.y1]:mt.tangentAt.call(this,t);return Lo(n,n)},e}(nt);const mr=gr;var _t=["fromSymbol","toSymbol"];function Ma(a){return"_"+a+"Type"}function Ba(a,e,t){var o=e.getItemVisual(t,a);if(!o||o==="none")return o;var n=e.getItemVisual(t,a+"Size"),i=e.getItemVisual(t,a+"Rotate"),r=e.getItemVisual(t,a+"Offset"),s=e.getItemVisual(t,a+"KeepAspect"),l=oa(n),u=na(r||0,l);return o+l+u+(i||"")+(s||"")}function Va(a,e,t){var o=e.getItemVisual(t,a);if(!(!o||o==="none")){var n=e.getItemVisual(t,a+"Size"),i=e.getItemVisual(t,a+"Rotate"),r=e.getItemVisual(t,a+"Offset"),s=e.getItemVisual(t,a+"KeepAspect"),l=oa(n),u=na(r||0,l),c=ta(o,-l[0]/2+u[0],-l[1]/2+u[1],l[0],l[1],null,s);return c.__specifiedRotation=i==null||isNaN(i)?void 0:+i*Math.PI/180||0,c.name=a,c}}function yr(a){var e=new mr({name:"line",subPixelOptimize:!0});return Ft(e.shape,a),e}function Ft(a,e){a.x1=e[0][0],a.y1=e[0][1],a.x2=e[1][0],a.y2=e[1][1],a.percent=1;var t=e[2];t?(a.cpx1=t[0],a.cpy1=t[1]):(a.cpx1=NaN,a.cpy1=NaN)}var _r=function(a){k(e,a);function e(t,o,n){var i=a.call(this)||this;return i._createLine(t,o,n),i}return e.prototype._createLine=function(t,o,n){var i=t.hostModel,r=t.getItemLayout(o),s=yr(r);s.shape.percent=0,Io(s,{shape:{percent:1}},i,o),this.add(s),P(_t,function(l){var u=Va(l,t,o);this.add(u),this[Ma(l)]=Ba(l,t,o)},this),this._updateCommonStl(t,o,n)},e.prototype.updateData=function(t,o,n){var i=t.hostModel,r=this.childOfName("line"),s=t.getItemLayout(o),l={shape:{}};Ft(l.shape,s),Oo(r,l,i,o),P(_t,function(u){var c=Ba(u,t,o),d=Ma(u);if(this[d]!==c){this.remove(this.childOfName(u));var p=Va(u,t,o);this.add(p)}this[d]=c},this),this._updateCommonStl(t,o,n)},e.prototype.getLinePath=function(){return this.childAt(0)},e.prototype._updateCommonStl=function(t,o,n){var i=t.hostModel,r=this.childOfName("line"),s=n&&n.emphasisLineStyle,l=n&&n.blurLineStyle,u=n&&n.selectLineStyle,c=n&&n.labelStatesModels,d=n&&n.emphasisDisabled,p=n&&n.focus,m=n&&n.blurScope;if(!n||t.hasItemOption){var v=t.getItemModel(o),h=v.getModel("emphasis");s=h.getModel("lineStyle").getLineStyle(),l=v.getModel(["blur","lineStyle"]).getLineStyle(),u=v.getModel(["select","lineStyle"]).getLineStyle(),d=h.get("disabled"),p=h.get("focus"),m=h.get("blurScope"),c=ko(v)}var g=t.getItemVisual(o,"style"),y=g.stroke;r.useStyle(g),r.style.fill=null,r.style.strokeNoScale=!0,r.ensureState("emphasis").style=s,r.ensureState("blur").style=l,r.ensureState("select").style=u,P(_t,function(x){var w=this.childOfName(x);if(w){w.setColor(y),w.style.opacity=g.opacity;for(var D=0;D<Pa.length;D++){var L=Pa[D],C=r.getState(L);if(C){var A=C.style||{},N=w.ensureState(L),R=N.style||(N.style={});A.stroke!=null&&(R[w.__isEmptyBrush?"stroke":"fill"]=A.stroke),A.opacity!=null&&(R.opacity=A.opacity)}}w.markRedraw()}},this);var _=i.getRawValue(o);Rn(this,c,{labelDataIndex:o,labelFetcher:{getFormattedLabel:function(x,w){return i.getFormattedLabel(x,w,t.dataType)}},inheritColor:y||"#000",defaultOpacity:g.opacity,defaultText:(_==null?t.getName(o):isFinite(_)?$n(_):_)+""});var b=this.getTextContent();if(b){var f=c.normal;b.__align=b.style.align,b.__verticalAlign=b.style.verticalAlign,b.__position=f.get("position")||"middle";var S=f.get("distance");F(S)||(S=[S,S]),b.__labelDistance=S}this.setTextConfig({position:null,local:!0,inside:!1}),Fn(this,p,m,d)},e.prototype.highlight=function(){Et(this)},e.prototype.downplay=function(){zt(this)},e.prototype.updateLayout=function(t,o){this.setLinePoints(t.getItemLayout(o))},e.prototype.setLinePoints=function(t){var o=this.childOfName("line");Ft(o.shape,t),o.dirty()},e.prototype.beforeUpdate=function(){var t=this,o=t.childOfName("fromSymbol"),n=t.childOfName("toSymbol"),i=t.getTextContent();if(!o&&!n&&(!i||i.ignore))return;for(var r=1,s=this.parent;s;)s.scaleX&&(r/=s.scaleX),s=s.parent;var l=t.childOfName("line");if(!this.__dirty&&!l.__dirty)return;var u=l.shape.percent,c=l.pointAt(0),d=l.pointAt(u),p=Wn([],d,c);Lo(p,p);function m(C,A){var N=C.__specifiedRotation;if(N==null){var R=l.tangentAt(A);C.attr("rotation",(A===1?-1:1)*Math.PI/2-Math.atan2(R[1],R[0]))}else C.attr("rotation",N)}if(o&&(o.setPosition(c),m(o,0),o.scaleX=o.scaleY=r*u,o.markRedraw()),n&&(n.setPosition(d),m(n,1),n.scaleX=n.scaleY=r*u,n.markRedraw()),i&&!i.ignore){i.x=i.y=0,i.originX=i.originY=0;var v=void 0,h=void 0,g=i.__labelDistance,y=g[0]*r,_=g[1]*r,b=u/2,f=l.tangentAt(b),S=[f[1],-f[0]],x=l.pointAt(b);S[1]>0&&(S[0]=-S[0],S[1]=-S[1]);var w=f[0]<0?-1:1;if(i.__position!=="start"&&i.__position!=="end"){var D=-Math.atan2(f[1],f[0]);d[0]<c[0]&&(D=Math.PI+D),i.rotation=D}var L=void 0;switch(i.__position){case"insideStartTop":case"insideMiddleTop":case"insideEndTop":case"middle":L=-_,h="bottom";break;case"insideStartBottom":case"insideMiddleBottom":case"insideEndBottom":L=_,h="top";break;default:L=0,h="middle"}switch(i.__position){case"end":i.x=p[0]*y+d[0],i.y=p[1]*_+d[1],v=p[0]>.8?"left":p[0]<-.8?"right":"center",h=p[1]>.8?"top":p[1]<-.8?"bottom":"middle";break;case"start":i.x=-p[0]*y+c[0],i.y=-p[1]*_+c[1],v=p[0]>.8?"right":p[0]<-.8?"left":"center",h=p[1]>.8?"bottom":p[1]<-.8?"top":"middle";break;case"insideStartTop":case"insideStart":case"insideStartBottom":i.x=y*w+c[0],i.y=c[1]+L,v=f[0]<0?"right":"left",i.originX=-y*w,i.originY=-L;break;case"insideMiddleTop":case"insideMiddle":case"insideMiddleBottom":case"middle":i.x=x[0],i.y=x[1]+L,v="center",i.originY=-L;break;case"insideEndTop":case"insideEnd":case"insideEndBottom":i.x=-y*w+d[0],i.y=d[1]+L,v=f[0]>=0?"right":"left",i.originX=y*w,i.originY=-L;break}i.scaleX=i.scaleY=r,i.setStyle({verticalAlign:i.__verticalAlign||h,align:i.__align||v})}},e}(be);const br=_r;var Sr=function(){function a(e){this.group=new be,this._LineCtor=e||br}return a.prototype.updateData=function(e){var t=this;this._progressiveEls=null;var o=this,n=o.group,i=o._lineData;o._lineData=e,i||n.removeAll();var r=Na(e);e.diff(i).add(function(s){t._doAdd(e,s,r)}).update(function(s,l){t._doUpdate(i,e,l,s,r)}).remove(function(s){n.remove(i.getItemGraphicEl(s))}).execute()},a.prototype.updateLayout=function(){var e=this._lineData;e&&e.eachItemGraphicEl(function(t,o){t.updateLayout(e,o)},this)},a.prototype.incrementalPrepareUpdate=function(e){this._seriesScope=Na(e),this._lineData=null,this.group.removeAll()},a.prototype.incrementalUpdate=function(e,t){this._progressiveEls=[];function o(s){!s.isGroup&&!xr(s)&&(s.incremental=!0,s.ensureState("emphasis").hoverLayer=!0)}for(var n=e.start;n<e.end;n++){var i=t.getItemLayout(n);if(bt(i)){var r=new this._LineCtor(t,n,this._seriesScope);r.traverse(o),this.group.add(r),t.setItemGraphicEl(n,r),this._progressiveEls.push(r)}}},a.prototype.remove=function(){this.group.removeAll()},a.prototype.eachRendered=function(e){Mo(this._progressiveEls||this.group,e)},a.prototype._doAdd=function(e,t,o){var n=e.getItemLayout(t);if(bt(n)){var i=new this._LineCtor(e,t,o);e.setItemGraphicEl(t,i),this.group.add(i)}},a.prototype._doUpdate=function(e,t,o,n,i){var r=e.getItemGraphicEl(o);if(!bt(t.getItemLayout(n))){this.group.remove(r);return}r?r.updateData(t,n,i):r=new this._LineCtor(t,n,i),t.setItemGraphicEl(n,r),this.group.add(r)},a}();function xr(a){return a.animators&&a.animators.length>0}function Na(a){var e=a.hostModel,t=e.getModel("emphasis");return{lineStyle:e.getModel("lineStyle").getLineStyle(),emphasisLineStyle:t.getModel(["lineStyle"]).getLineStyle(),blurLineStyle:e.getModel(["blur","lineStyle"]).getLineStyle(),selectLineStyle:e.getModel(["select","lineStyle"]).getLineStyle(),emphasisDisabled:t.get("disabled"),blurScope:t.get("blurScope"),focus:t.get("focus"),labelStatesModels:ko(e)}}function Ea(a){return isNaN(a[0])||isNaN(a[1])}function bt(a){return a&&!Ea(a[0])&&!Ea(a[1])}const Cr=Sr;var ye=!0,Ge=Math.min,Te=Math.max,wr=Math.pow,Ar=1e4,Pr=6,Tr=6,za="globalPan",Dr={w:[0,0],e:[0,1],n:[1,0],s:[1,1]},Lr={w:"ew",e:"ew",n:"ns",s:"ns",ne:"nesw",sw:"nesw",nw:"nwse",se:"nwse"},Ra={brushStyle:{lineWidth:2,stroke:"rgba(210,219,238,0.3)",fill:"#D2DBEE"},transformable:!0,brushMode:"single",removeOnClick:!1},Ir=0,Or=function(a){k(e,a);function e(t){var o=a.call(this)||this;return o._track=[],o._covers=[],o._handlers={},o._zr=t,o.group=new be,o._uid="brushController_"+Ir++,P(zr,function(n,i){this._handlers[i]=re(n,this)},o),o}return e.prototype.enableBrush=function(t){return this._brushType&&this._doDisableBrush(),t.brushType&&this._doEnableBrush(t),this},e.prototype._doEnableBrush=function(t){var o=this._zr;this._enableGlobalPan||Wi(o,za,this._uid),P(this._handlers,function(n,i){o.on(i,n)}),this._brushType=t.brushType,this._brushOption=se(le(Ra),t,!0)},e.prototype._doDisableBrush=function(){var t=this._zr;Gi(t,za,this._uid),P(this._handlers,function(o,n){t.off(n,o)}),this._brushType=this._brushOption=null},e.prototype.setPanels=function(t){if(t&&t.length){var o=this._panels={};P(t,function(n){o[n.panelId]=le(n)})}else this._panels=null;return this},e.prototype.mount=function(t){t=t||{},this._enableGlobalPan=t.enableGlobalPan;var o=this.group;return this._zr.add(o),o.attr({x:t.x||0,y:t.y||0,rotation:t.rotation||0,scaleX:t.scaleX||1,scaleY:t.scaleY||1}),this._transform=o.getLocalTransform(),this},e.prototype.updateCovers=function(t){t=U(t,function(p){return se(le(Ra),p,!0)});var o="\0-brush-index-",n=this._covers,i=this._covers=[],r=this,s=this._creatingCover;return new Bo(n,t,u,l).add(c).update(c).remove(d).execute(),this;function l(p,m){return(p.id!=null?p.id:o+m)+"-"+p.brushType}function u(p,m){return l(p.__brushOption,m)}function c(p,m){var v=t[p];if(m!=null&&n[m]===s)i[p]=n[m];else{var h=i[p]=m!=null?(n[m].__brushOption=v,n[m]):qo(r,Yo(r,v));sa(r,h)}}function d(p){n[p]!==s&&r.group.remove(n[p])}},e.prototype.unmount=function(){return this.enableBrush(!1),Wt(this),this._zr.remove(this.group),this},e.prototype.dispose=function(){this.unmount(),this.off()},e}(Gn);function Yo(a,e){var t=st[e.brushType].createCover(a,e);return t.__brushOption=e,Jo(t,e),a.group.add(t),t}function qo(a,e){var t=la(e);return t.endCreating&&(t.endCreating(a,e),Jo(e,e.__brushOption)),e}function Xo(a,e){var t=e.__brushOption;la(e).updateCoverShape(a,e,t.range,t)}function Jo(a,e){var t=e.z;t==null&&(t=Ar),a.traverse(function(o){o.z=t,o.z2=t})}function sa(a,e){la(e).updateCommon(a,e),Xo(a,e)}function la(a){return st[a.__brushOption.brushType]}function ua(a,e,t){var o=a._panels;if(!o)return ye;var n,i=a._transform;return P(o,function(r){r.isTargetByCursor(e,t,i)&&(n=r)}),n}function Qo(a,e){var t=a._panels;if(!t)return ye;var o=e.__brushOption.panelId;return o!=null?t[o]:ye}function Wt(a){var e=a._covers,t=e.length;return P(e,function(o){a.group.remove(o)},a),e.length=0,!!t}function _e(a,e){var t=U(a._covers,function(o){var n=o.__brushOption,i=le(n.range);return{brushType:n.brushType,panelId:n.panelId,range:i}});a.trigger("brush",{areas:t,isEnd:!!e.isEnd,removeOnClick:!!e.removeOnClick})}function kr(a){var e=a._track;if(!e.length)return!1;var t=e[e.length-1],o=e[0],n=t[0]-o[0],i=t[1]-o[1],r=wr(n*n+i*i,.5);return r>Pr}function en(a){var e=a.length-1;return e<0&&(e=0),[a[0],a[e]]}function tn(a,e,t,o){var n=new be;return n.add(new Rt({name:"main",style:ca(t),silent:!0,draggable:!0,cursor:"move",drift:Z($a,a,e,n,["n","s","w","e"]),ondragend:Z(_e,e,{isEnd:!0})})),P(o,function(i){n.add(new Rt({name:i.join(""),style:{opacity:0},draggable:!0,silent:!0,invisible:!0,drift:Z($a,a,e,n,i),ondragend:Z(_e,e,{isEnd:!0})}))}),n}function an(a,e,t,o){var n=o.brushStyle.lineWidth||0,i=Te(n,Tr),r=t[0][0],s=t[1][0],l=r-n/2,u=s-n/2,c=t[0][1],d=t[1][1],p=c-i+n/2,m=d-i+n/2,v=c-r,h=d-s,g=v+n,y=h+n;de(a,e,"main",r,s,v,h),o.transformable&&(de(a,e,"w",l,u,i,y),de(a,e,"e",p,u,i,y),de(a,e,"n",l,u,g,i),de(a,e,"s",l,m,g,i),de(a,e,"nw",l,u,i,i),de(a,e,"ne",p,u,i,i),de(a,e,"sw",l,m,i,i),de(a,e,"se",p,m,i,i))}function Gt(a,e){var t=e.__brushOption,o=t.transformable,n=e.childAt(0);n.useStyle(ca(t)),n.attr({silent:!o,cursor:o?"move":"default"}),P([["w"],["e"],["n"],["s"],["s","e"],["s","w"],["n","e"],["n","w"]],function(i){var r=e.childOfName(i.join("")),s=i.length===1?Ut(a,i[0]):Br(a,i);r&&r.attr({silent:!o,invisible:!o,cursor:o?Lr[s]+"-resize":null})})}function de(a,e,t,o,n,i,r){var s=e.childOfName(t);s&&s.setShape(Nr(da(a,e,[[o,n],[o+i,n+r]])))}function ca(a){return Ie({strokeNoScale:!0},a.brushStyle)}function on(a,e,t,o){var n=[Ge(a,t),Ge(e,o)],i=[Te(a,t),Te(e,o)];return[[n[0],i[0]],[n[1],i[1]]]}function Mr(a){return No(a.group)}function Ut(a,e){var t={w:"left",e:"right",n:"top",s:"bottom"},o={left:"w",right:"e",top:"n",bottom:"s"},n=Zn(t[e],Mr(a));return o[n]}function Br(a,e){var t=[Ut(a,e[0]),Ut(a,e[1])];return(t[0]==="e"||t[0]==="w")&&t.reverse(),t.join("")}function $a(a,e,t,o,n,i){var r=t.__brushOption,s=a.toRectRange(r.range),l=nn(e,n,i);P(o,function(u){var c=Dr[u];s[c[0]][c[1]]+=l[c[0]]}),r.range=a.fromRectRange(on(s[0][0],s[1][0],s[0][1],s[1][1])),sa(e,t),_e(e,{isEnd:!1})}function Vr(a,e,t,o){var n=e.__brushOption.range,i=nn(a,t,o);P(n,function(r){r[0]+=i[0],r[1]+=i[1]}),sa(a,e),_e(a,{isEnd:!1})}function nn(a,e,t){var o=a.group,n=o.transformCoordToLocal(e,t),i=o.transformCoordToLocal(0,0);return[n[0]-i[0],n[1]-i[1]]}function da(a,e,t){var o=Qo(a,e);return o&&o!==ye?o.clipPath(t,a._transform):le(t)}function Nr(a){var e=Ge(a[0][0],a[1][0]),t=Ge(a[0][1],a[1][1]),o=Te(a[0][0],a[1][0]),n=Te(a[0][1],a[1][1]);return{x:e,y:t,width:o-e,height:n-t}}function Er(a,e,t){if(!(!a._brushType||Rr(a,e.offsetX,e.offsetY))){var o=a._zr,n=a._covers,i=ua(a,e,t);if(!a._dragging)for(var r=0;r<n.length;r++){var s=n[r].__brushOption;if(i&&(i===ye||s.panelId===i.panelId)&&st[s.brushType].contain(n[r],t[0],t[1]))return}i&&o.setCursorStyle("crosshair")}}function Zt(a){var e=a.event;e.preventDefault&&e.preventDefault()}function Ht(a,e,t){return a.childOfName("main").contain(e,t)}function rn(a,e,t,o){var n=a._creatingCover,i=a._creatingPanel,r=a._brushOption,s;if(a._track.push(t.slice()),kr(a)||n){if(i&&!n){r.brushMode==="single"&&Wt(a);var l=le(r);l.brushType=Fa(l.brushType,i),l.panelId=i===ye?null:i.panelId,n=a._creatingCover=Yo(a,l),a._covers.push(n)}if(n){var u=st[Fa(a._brushType,i)],c=n.__brushOption;c.range=u.getCreatingRange(da(a,n,a._track)),o&&(qo(a,n),u.updateCommon(a,n)),Xo(a,n),s={isEnd:o}}}else o&&r.brushMode==="single"&&r.removeOnClick&&ua(a,e,t)&&Wt(a)&&(s={isEnd:o,removeOnClick:!0});return s}function Fa(a,e){return a==="auto"?e.defaultBrushType:a}var zr={mousedown:function(a){if(this._dragging)Wa(this,a);else if(!a.target||!a.target.draggable){Zt(a);var e=this.group.transformCoordToLocal(a.offsetX,a.offsetY);this._creatingCover=null;var t=this._creatingPanel=ua(this,a,e);t&&(this._dragging=!0,this._track=[e.slice()])}},mousemove:function(a){var e=a.offsetX,t=a.offsetY,o=this.group.transformCoordToLocal(e,t);if(Er(this,a,o),this._dragging){Zt(a);var n=rn(this,a,o,!1);n&&_e(this,n)}},mouseup:function(a){Wa(this,a)}};function Wa(a,e){if(a._dragging){Zt(e);var t=e.offsetX,o=e.offsetY,n=a.group.transformCoordToLocal(t,o),i=rn(a,e,n,!0);a._dragging=!1,a._track=[],a._creatingCover=null,i&&_e(a,i)}}function Rr(a,e,t){var o=a._zr;return e<0||e>o.getWidth()||t<0||t>o.getHeight()}var st={lineX:Ga(0),lineY:Ga(1),rect:{createCover:function(a,e){function t(o){return o}return tn({toRectRange:t,fromRectRange:t},a,e,[["w"],["e"],["n"],["s"],["s","e"],["s","w"],["n","e"],["n","w"]])},getCreatingRange:function(a){var e=en(a);return on(e[1][0],e[1][1],e[0][0],e[0][1])},updateCoverShape:function(a,e,t,o){an(a,e,t,o)},updateCommon:Gt,contain:Ht},polygon:{createCover:function(a,e){var t=new be;return t.add(new Vo({name:"main",style:ca(e),silent:!0})),t},getCreatingRange:function(a){return a},endCreating:function(a,e){e.remove(e.childAt(0)),e.add(new Un({name:"main",draggable:!0,drift:Z(Vr,a,e),ondragend:Z(_e,a,{isEnd:!0})}))},updateCoverShape:function(a,e,t,o){e.childAt(0).setShape({points:da(a,e,t)})},updateCommon:Gt,contain:Ht}};function Ga(a){return{createCover:function(e,t){return tn({toRectRange:function(o){var n=[o,[0,100]];return a&&n.reverse(),n},fromRectRange:function(o){return o[a]}},e,t,[[["w"],["e"]],[["n"],["s"]]][a])},getCreatingRange:function(e){var t=en(e),o=Ge(t[0][a],t[1][a]),n=Te(t[0][a],t[1][a]);return[o,n]},updateCoverShape:function(e,t,o,n){var i,r=Qo(e,t);if(r!==ye&&r.getLinearBrushOtherExtent)i=r.getLinearBrushOtherExtent(a);else{var s=e._zr;i=[0,[s.getWidth(),s.getHeight()][1-a]]}var l=[o,i];a&&l.reverse(),an(e,t,l,n)},updateCommon:Gt,contain:Ht}}const $r=Or;function Fr(a){return a=pa(a),function(e){return Hn(e,a)}}function Wr(a,e){return a=pa(a),function(t){var o=e??t,n=o?a.width:a.height,i=o?a.x:a.y;return[i,i+(n||0)]}}function Gr(a,e,t){var o=pa(a);return function(n,i){return o.contain(i[0],i[1])&&!vr(n,e,t)}}function pa(a){return ea.create(a)}var Ur=function(){function a(){}return a.prototype.getInitialData=function(e,t){var o,n=t.getComponent("xAxis",this.get("xAxisIndex")),i=t.getComponent("yAxis",this.get("yAxisIndex")),r=n.get("type"),s=i.get("type"),l;r==="category"?(e.layout="horizontal",o=n.getOrdinalMeta(),l=!0):s==="category"?(e.layout="vertical",o=i.getOrdinalMeta(),l=!0):e.layout=e.layout||"horizontal";var u=["x","y"],c=e.layout==="horizontal"?0:1,d=this._baseAxisDim=u[c],p=u[1-c],m=[n,i],v=m[c].get("type"),h=m[1-c].get("type"),g=e.data;if(g&&l){var y=[];P(g,function(f,S){var x;F(f)?(x=f.slice(),f.unshift(S)):F(f.value)?(x=ue({},f),x.value=x.value.slice(),f.value.unshift(S)):x=f,y.push(x)}),e.data=y}var _=this.defaultValueDimensions,b=[{name:d,type:Ta(v),ordinalMeta:o,otherDims:{tooltip:!1,itemName:0},dimsDef:["base"]},{name:p,type:Ta(h),dimsDef:_.slice()}];return nr(this,{coordDimensions:b,dimensionsCount:_.length+1,encodeDefaulter:Z(jn,b,this)})},a.prototype.getBaseAxis=function(){var e=this._baseAxisDim;return this.ecModel.getComponent(e+"Axis",this.get(e+"AxisIndex")).axis},a}(),Zr=["color","borderColor"],Hr=function(a){k(e,a);function e(){var t=a!==null&&a.apply(this,arguments)||this;return t.type=e.type,t}return e.prototype.render=function(t,o,n){this.group.removeClipPath(),this._progressiveEls=null,this._updateDrawMode(t),this._isLargeDraw?this._renderLarge(t):this._renderNormal(t)},e.prototype.incrementalPrepareRender=function(t,o,n){this._clear(),this._updateDrawMode(t)},e.prototype.incrementalRender=function(t,o,n,i){this._progressiveEls=[],this._isLargeDraw?this._incrementalRenderLarge(t,o):this._incrementalRenderNormal(t,o)},e.prototype.eachRendered=function(t){Mo(this._progressiveEls||this.group,t)},e.prototype._updateDrawMode=function(t){var o=t.pipelineContext.large;(this._isLargeDraw==null||o!==this._isLargeDraw)&&(this._isLargeDraw=o,this._clear())},e.prototype._renderNormal=function(t){var o=t.getData(),n=this._data,i=this.group,r=o.getLayout("isSimpleBox"),s=t.get("clip",!0),l=t.coordinateSystem,u=l.getArea&&l.getArea();this._data||i.removeAll(),o.diff(n).add(function(c){if(o.hasValue(c)){var d=o.getItemLayout(c);if(s&&Ua(u,d))return;var p=St(d,c,!0);Io(p,{shape:{points:d.ends}},t,c),xt(p,o,c,r),i.add(p),o.setItemGraphicEl(c,p)}}).update(function(c,d){var p=n.getItemGraphicEl(d);if(!o.hasValue(c)){i.remove(p);return}var m=o.getItemLayout(c);if(s&&Ua(u,m)){i.remove(p);return}p?(Oo(p,{shape:{points:m.ends}},t,c),Kn(p)):p=St(m),xt(p,o,c,r),i.add(p),o.setItemGraphicEl(c,p)}).remove(function(c){var d=n.getItemGraphicEl(c);d&&i.remove(d)}).execute(),this._data=o},e.prototype._renderLarge=function(t){this._clear(),Za(t,this.group);var o=t.get("clip",!0)?Ui(t.coordinateSystem,!1,t):null;o?this.group.setClipPath(o):this.group.removeClipPath()},e.prototype._incrementalRenderNormal=function(t,o){for(var n=o.getData(),i=n.getLayout("isSimpleBox"),r;(r=t.next())!=null;){var s=n.getItemLayout(r),l=St(s);xt(l,n,r,i),l.incremental=!0,this.group.add(l),this._progressiveEls.push(l)}},e.prototype._incrementalRenderLarge=function(t,o){Za(o,this.group,this._progressiveEls,!0)},e.prototype.remove=function(t){this._clear()},e.prototype._clear=function(){this.group.removeAll(),this._data=null},e.type="candlestick",e}(Do),jr=function(){function a(){}return a}(),Kr=function(a){k(e,a);function e(t){var o=a.call(this,t)||this;return o.type="normalCandlestickBox",o}return e.prototype.getDefaultShape=function(){return new jr},e.prototype.buildPath=function(t,o){var n=o.points;this.__simpleBox?(t.moveTo(n[4][0],n[4][1]),t.lineTo(n[6][0],n[6][1])):(t.moveTo(n[0][0],n[0][1]),t.lineTo(n[1][0],n[1][1]),t.lineTo(n[2][0],n[2][1]),t.lineTo(n[3][0],n[3][1]),t.closePath(),t.moveTo(n[4][0],n[4][1]),t.lineTo(n[5][0],n[5][1]),t.moveTo(n[6][0],n[6][1]),t.lineTo(n[7][0],n[7][1]))},e}(nt);function St(a,e,t){var o=a.ends;return new Kr({shape:{points:t?Yr(o,a):o},z2:100})}function Ua(a,e){for(var t=!0,o=0;o<e.ends.length;o++)if(a.contain(e.ends[o][0],e.ends[o][1])){t=!1;break}return t}function xt(a,e,t,o){var n=e.getItemModel(t);a.useStyle(e.getItemVisual(t,"style")),a.style.strokeNoScale=!0,a.__simpleBox=o,Yn(a,n)}function Yr(a,e){return U(a,function(t){return t=t.slice(),t[1]=e.initBaseline,t})}var qr=function(){function a(){}return a}(),Ct=function(a){k(e,a);function e(t){var o=a.call(this,t)||this;return o.type="largeCandlestickBox",o}return e.prototype.getDefaultShape=function(){return new qr},e.prototype.buildPath=function(t,o){for(var n=o.points,i=0;i<n.length;)if(this.__sign===n[i++]){var r=n[i++];t.moveTo(r,n[i++]),t.lineTo(r,n[i++])}else i+=3},e}(nt);function Za(a,e,t,o){var n=a.getData(),i=n.getLayout("largePoints"),r=new Ct({shape:{points:i},__sign:1,ignoreCoarsePointer:!0});e.add(r);var s=new Ct({shape:{points:i},__sign:-1,ignoreCoarsePointer:!0});e.add(s);var l=new Ct({shape:{points:i},__sign:0,ignoreCoarsePointer:!0});e.add(l),wt(1,r,a),wt(-1,s,a),wt(0,l,a),o&&(r.incremental=!0,s.incremental=!0),t&&t.push(r,s)}function wt(a,e,t,o){var n=t.get(["itemStyle",a>0?"borderColor":"borderColor0"])||t.get(["itemStyle",a>0?"color":"color0"]);a===0&&(n=t.get(["itemStyle","borderColorDoji"]));var i=t.getModel("itemStyle").getItemStyle(Zr);e.useStyle(i),e.style.fill=null,e.style.stroke=n}const Xr=Hr;var sn=function(a){k(e,a);function e(){var t=a!==null&&a.apply(this,arguments)||this;return t.type=e.type,t.defaultValueDimensions=[{name:"open",defaultTooltip:!0},{name:"close",defaultTooltip:!0},{name:"lowest",defaultTooltip:!0},{name:"highest",defaultTooltip:!0}],t}return e.prototype.getShadowDim=function(){return"open"},e.prototype.brushSelector=function(t,o,n){var i=o.getItemLayout(t);return i&&n.rect(i.brushRect)},e.type="series.candlestick",e.dependencies=["xAxis","yAxis","grid"],e.defaultOption={z:2,coordinateSystem:"cartesian2d",legendHoverLink:!0,layout:null,clip:!0,itemStyle:{color:"#eb5454",color0:"#47b262",borderColor:"#eb5454",borderColor0:"#47b262",borderColorDoji:null,borderWidth:1},emphasis:{scale:!0,itemStyle:{borderWidth:2}},barMaxWidth:null,barMinWidth:null,barWidth:null,large:!0,largeThreshold:600,progressive:3e3,progressiveThreshold:1e4,progressiveChunkMode:"mod",animationEasing:"linear",animationDuration:300},e}(To);ia(sn,Ur,!0);const Jr=sn;function Qr(a){!a||!F(a.series)||P(a.series,function(e){Fe(e)&&e.type==="k"&&(e.type="candlestick")})}var es=["itemStyle","borderColor"],ts=["itemStyle","borderColor0"],as=["itemStyle","borderColorDoji"],os=["itemStyle","color"],ns=["itemStyle","color0"],is={seriesType:"candlestick",plan:Eo(),performRawSeries:!0,reset:function(a,e){function t(i,r){return r.get(i>0?os:ns)}function o(i,r){return r.get(i===0?as:i>0?es:ts)}if(!e.isSeriesFiltered(a)){var n=a.pipelineContext.large;return!n&&{progress:function(i,r){for(var s;(s=i.next())!=null;){var l=r.getItemModel(s),u=r.getItemLayout(s).sign,c=l.getItemStyle();c.fill=t(u,l),c.stroke=o(u,l)||c.fill;var d=r.ensureUniqueItemVisual(s,"style");ue(d,c)}}}}}};const rs=is;var ss={seriesType:"candlestick",plan:Eo(),reset:function(a){var e=a.coordinateSystem,t=a.getData(),o=ls(a,t),n=0,i=1,r=["x","y"],s=t.getDimensionIndex(t.mapDimension(r[n])),l=U(t.mapDimensionsAll(r[i]),t.getDimensionIndex,t),u=l[0],c=l[1],d=l[2],p=l[3];if(t.setLayout({candleWidth:o,isSimpleBox:o<=1.3}),s<0||l.length<4)return;return{progress:a.pipelineContext.large?v:m};function m(h,g){for(var y,_=g.getStore();(y=h.next())!=null;){var b=_.get(s,y),f=_.get(u,y),S=_.get(c,y),x=_.get(d,y),w=_.get(p,y),D=Math.min(f,S),L=Math.max(f,S),C=ce(D,b),A=ce(L,b),N=ce(x,b),R=ce(w,b),H=[];ke(H,A,0),ke(H,C,1),H.push(T(R),T(A),T(N),T(C));var Oe=g.getItemModel(y),K=!!Oe.get(["itemStyle","borderColorDoji"]);g.setItemLayout(y,{sign:Ha(_,y,f,S,c,K),initBaseline:f>S?A[i]:C[i],ends:H,brushRect:Ze(x,w,b)})}function ce(E,q){var X=[];return X[n]=q,X[i]=E,isNaN(q)||isNaN(E)?[NaN,NaN]:e.dataToPoint(X)}function ke(E,q,X){var z=q.slice(),Y=q.slice();z[n]=ft(z[n]+o/2,1,!1),Y[n]=ft(Y[n]-o/2,1,!0),X?E.push(z,Y):E.push(Y,z)}function Ze(E,q,X){var z=ce(E,X),Y=ce(q,X);return z[n]-=o/2,Y[n]-=o/2,{x:z[0],y:z[1],width:o,height:Y[1]-z[1]}}function T(E){return E[n]=ft(E[n],1),E}}function v(h,g){for(var y=qn(h.count*4),_=0,b,f=[],S=[],x,w=g.getStore(),D=!!a.get(["itemStyle","borderColorDoji"]);(x=h.next())!=null;){var L=w.get(s,x),C=w.get(u,x),A=w.get(c,x),N=w.get(d,x),R=w.get(p,x);if(isNaN(L)||isNaN(N)||isNaN(R)){y[_++]=NaN,_+=3;continue}y[_++]=Ha(w,x,C,A,c,D),f[n]=L,f[i]=N,b=e.dataToPoint(f,null,S),y[_++]=b?b[0]:NaN,y[_++]=b?b[1]:NaN,f[i]=R,b=e.dataToPoint(f,null,S),y[_++]=b?b[1]:NaN}g.setLayout("largePoints",y)}}};function Ha(a,e,t,o,n,i){var r;return t>o?r=-1:t<o?r=1:r=i?0:e>0?a.get(n,e-1)<=o?1:-1:1,r}function ls(a,e){var t=a.getBaseAxis(),o,n=t.type==="category"?t.getBandWidth():(o=t.getExtent(),Math.abs(o[1]-o[0])/e.count()),i=we(ge(a.get("barMaxWidth"),n),n),r=we(ge(a.get("barMinWidth"),1),n),s=a.get("barWidth");return s!=null?we(s,n):Math.max(Math.min(n/2,i),r)}const us=ss;function cs(a){a.registerChartView(Xr),a.registerSeriesModel(Jr),a.registerPreprocessor(Qr),a.registerVisual(rs),a.registerLayout(us)}var ds=function(a){k(e,a);function e(){var t=a!==null&&a.apply(this,arguments)||this;return t.type=e.type,t}return e.prototype.init=function(t,o,n){var i=Xn(t);a.prototype.init.apply(this,arguments),ja(t,i)},e.prototype.mergeOption=function(t){a.prototype.mergeOption.apply(this,arguments),ja(this.option,t)},e.prototype.getCellSize=function(){return this.option.cellSize},e.type="calendar",e.defaultOption={z:2,left:80,top:60,cellSize:20,orient:"horizontal",splitLine:{show:!0,lineStyle:{color:"#000",width:1,type:"solid"}},itemStyle:{color:"#fff",borderWidth:1,borderColor:"#ccc"},dayLabel:{show:!0,firstDay:0,position:"start",margin:"50%",color:"#000"},monthLabel:{show:!0,position:"start",margin:5,align:"center",formatter:null,color:"#000"},yearLabel:{show:!0,position:null,margin:30,formatter:null,color:"#ccc",fontFamily:"sans-serif",fontWeight:"bolder",fontSize:20}},e}(it);function ja(a,e){var t=a.cellSize,o;F(t)?o=t:o=a.cellSize=[t,t],o.length===1&&(o[1]=o[0]);var n=U([0,1],function(i){return Jn(e,i)&&(o[i]="auto"),o[i]!=null&&o[i]!=="auto"});Qn(a,e,{type:"box",ignoreSize:n})}const ps=ds;var hs=function(a){k(e,a);function e(){var t=a!==null&&a.apply(this,arguments)||this;return t.type=e.type,t}return e.prototype.render=function(t,o,n){var i=this.group;i.removeAll();var r=t.coordinateSystem,s=r.getRangeInfo(),l=r.getOrient(),u=o.getLocaleModel();this._renderDayRect(t,s,i),this._renderLines(t,s,l,i),this._renderYearText(t,s,l,i),this._renderMonthText(t,u,l,i),this._renderWeekText(t,u,s,l,i)},e.prototype._renderDayRect=function(t,o,n){for(var i=t.coordinateSystem,r=t.getModel("itemStyle").getItemStyle(),s=i.getCellWidth(),l=i.getCellHeight(),u=o.start.time;u<=o.end.time;u=i.getNextNDay(u,1).time){var c=i.dataToRect([u],!1).tl,d=new Rt({shape:{x:c[0],y:c[1],width:s,height:l},cursor:"default",style:r});n.add(d)}},e.prototype._renderLines=function(t,o,n,i){var r=this,s=t.coordinateSystem,l=t.getModel(["splitLine","lineStyle"]).getLineStyle(),u=t.get(["splitLine","show"]),c=l.lineWidth;this._tlpoints=[],this._blpoints=[],this._firstDayOfMonth=[],this._firstDayPoints=[];for(var d=o.start,p=0;d.time<=o.end.time;p++){v(d.formatedDate),p===0&&(d=s.getDateInfo(o.start.y+"-"+o.start.m));var m=d.date;m.setMonth(m.getMonth()+1),d=s.getDateInfo(m)}v(s.getNextNDay(o.end.time,1).formatedDate);function v(h){r._firstDayOfMonth.push(s.getDateInfo(h)),r._firstDayPoints.push(s.dataToRect([h],!1).tl);var g=r._getLinePointsOfOneWeek(t,h,n);r._tlpoints.push(g[0]),r._blpoints.push(g[g.length-1]),u&&r._drawSplitline(g,l,i)}u&&this._drawSplitline(r._getEdgesPoints(r._tlpoints,c,n),l,i),u&&this._drawSplitline(r._getEdgesPoints(r._blpoints,c,n),l,i)},e.prototype._getEdgesPoints=function(t,o,n){var i=[t[0].slice(),t[t.length-1].slice()],r=n==="horizontal"?0:1;return i[0][r]=i[0][r]-o/2,i[1][r]=i[1][r]+o/2,i},e.prototype._drawSplitline=function(t,o,n){var i=new Vo({z2:20,shape:{points:t},style:o});n.add(i)},e.prototype._getLinePointsOfOneWeek=function(t,o,n){for(var i=t.coordinateSystem,r=i.getDateInfo(o),s=[],l=0;l<7;l++){var u=i.getNextNDay(r.time,l),c=i.dataToRect([u.time],!1);s[2*u.day]=c.tl,s[2*u.day+1]=c[n==="horizontal"?"bl":"tr"]}return s},e.prototype._formatterLabel=function(t,o){return he(t)&&t?ei(t,o):We(t)?t(o):o.nameMap},e.prototype._yearTextPositionControl=function(t,o,n,i,r){var s=o[0],l=o[1],u=["center","bottom"];i==="bottom"?(l+=r,u=["center","top"]):i==="left"?s-=r:i==="right"?(s+=r,u=["center","top"]):l-=r;var c=0;return(i==="left"||i==="right")&&(c=Math.PI/2),{rotation:c,x:s,y:l,style:{align:u[0],verticalAlign:u[1]}}},e.prototype._renderYearText=function(t,o,n,i){var r=t.getModel("yearLabel");if(r.get("show")){var s=r.get("margin"),l=r.get("position");l||(l=n!=="horizontal"?"top":"left");var u=[this._tlpoints[this._tlpoints.length-1],this._blpoints[0]],c=(u[0][0]+u[1][0])/2,d=(u[0][1]+u[1][1])/2,p=n==="horizontal"?0:1,m={top:[c,u[p][1]],bottom:[c,u[1-p][1]],left:[u[1-p][0],d],right:[u[p][0],d]},v=o.start.y;+o.end.y>+o.start.y&&(v=v+"-"+o.end.y);var h=r.get("formatter"),g={start:o.start.y,end:o.end.y,nameMap:v},y=this._formatterLabel(h,g),_=new Ae({z2:30,style:Pe(r,{text:y})});_.attr(this._yearTextPositionControl(_,m[l],n,l,s)),i.add(_)}},e.prototype._monthTextPositionControl=function(t,o,n,i,r){var s="left",l="top",u=t[0],c=t[1];return n==="horizontal"?(c=c+r,o&&(s="center"),i==="start"&&(l="bottom")):(u=u+r,o&&(l="middle"),i==="start"&&(s="right")),{x:u,y:c,align:s,verticalAlign:l}},e.prototype._renderMonthText=function(t,o,n,i){var r=t.getModel("monthLabel");if(r.get("show")){var s=r.get("nameMap"),l=r.get("margin"),u=r.get("position"),c=r.get("align"),d=[this._tlpoints,this._blpoints];(!s||he(s))&&(s&&(o=Da(s)||o),s=o.get(["time","monthAbbr"])||[]);var p=u==="start"?0:1,m=n==="horizontal"?0:1;l=u==="start"?-l:l;for(var v=c==="center",h=0;h<d[p].length-1;h++){var g=d[p][h].slice(),y=this._firstDayOfMonth[h];if(v){var _=this._firstDayPoints[h];g[m]=(_[m]+d[0][h+1][m])/2}var b=r.get("formatter"),f=s[+y.m-1],S={yyyy:y.y,yy:(y.y+"").slice(2),MM:y.m,M:+y.m,nameMap:f},x=this._formatterLabel(b,S),w=new Ae({z2:30,style:ue(Pe(r,{text:x}),this._monthTextPositionControl(g,v,n,u,l))});i.add(w)}}},e.prototype._weekTextPositionControl=function(t,o,n,i,r){var s="center",l="middle",u=t[0],c=t[1],d=n==="start";return o==="horizontal"?(u=u+i+(d?1:-1)*r[0]/2,s=d?"right":"left"):(c=c+i+(d?1:-1)*r[1]/2,l=d?"bottom":"top"),{x:u,y:c,align:s,verticalAlign:l}},e.prototype._renderWeekText=function(t,o,n,i,r){var s=t.getModel("dayLabel");if(s.get("show")){var l=t.coordinateSystem,u=s.get("position"),c=s.get("nameMap"),d=s.get("margin"),p=l.getFirstDayOfWeek();if(!c||he(c)){c&&(o=Da(c)||o);var m=o.get(["time","dayOfWeekShort"]);c=m||U(o.get(["time","dayOfWeekAbbr"]),function(S){return S[0]})}var v=l.getNextNDay(n.end.time,7-n.lweek).time,h=[l.getCellWidth(),l.getCellHeight()];d=we(d,Math.min(h[1],h[0])),u==="start"&&(v=l.getNextNDay(n.start.time,-(7+n.fweek)).time,d=-d);for(var g=0;g<7;g++){var y=l.getNextNDay(v,g),_=l.dataToRect([y.time],!1).center,b=g;b=Math.abs((g+p)%7);var f=new Ae({z2:30,style:ue(Pe(s,{text:c[b]}),this._weekTextPositionControl(_,i,u,d,h))});r.add(f)}}},e.type="calendar",e}(rt);const fs=hs;var At=864e5,vs=function(){function a(e,t,o){this.type="calendar",this.dimensions=a.dimensions,this.getDimensionsInfo=a.getDimensionsInfo,this._model=e}return a.getDimensionsInfo=function(){return[{name:"time",type:"time"},"value"]},a.prototype.getRangeInfo=function(){return this._rangeInfo},a.prototype.getModel=function(){return this._model},a.prototype.getRect=function(){return this._rect},a.prototype.getCellWidth=function(){return this._sw},a.prototype.getCellHeight=function(){return this._sh},a.prototype.getOrient=function(){return this._orient},a.prototype.getFirstDayOfWeek=function(){return this._firstDayOfWeek},a.prototype.getDateInfo=function(e){e=ti(e);var t=e.getFullYear(),o=e.getMonth()+1,n=o<10?"0"+o:""+o,i=e.getDate(),r=i<10?"0"+i:""+i,s=e.getDay();return s=Math.abs((s+7-this.getFirstDayOfWeek())%7),{y:t+"",m:n,d:r,day:s,time:e.getTime(),formatedDate:t+"-"+n+"-"+r,date:e}},a.prototype.getNextNDay=function(e,t){return t=t||0,t===0?this.getDateInfo(e):(e=new Date(this.getDateInfo(e).time),e.setDate(e.getDate()+t),this.getDateInfo(e))},a.prototype.update=function(e,t){this._firstDayOfWeek=+this._model.getModel("dayLabel").get("firstDay"),this._orient=this._model.get("orient"),this._lineWidth=this._model.getModel("itemStyle").getItemStyle().lineWidth||0,this._rangeInfo=this._getRangeInfo(this._initRangeOption());var o=this._rangeInfo.weeks||1,n=["width","height"],i=this._model.getCellSize().slice(),r=this._model.getBoxLayoutParams(),s=this._orient==="horizontal"?[o,7]:[7,o];P([0,1],function(d){c(i,d)&&(r[n[d]]=i[d]*s[d])});var l={width:t.getWidth(),height:t.getHeight()},u=this._rect=zo(r,l);P([0,1],function(d){c(i,d)||(i[d]=u[n[d]]/s[d])});function c(d,p){return d[p]!=null&&d[p]!=="auto"}this._sw=i[0],this._sh=i[1]},a.prototype.dataToPoint=function(e,t){F(e)&&(e=e[0]),t==null&&(t=!0);var o=this.getDateInfo(e),n=this._rangeInfo,i=o.formatedDate;if(t&&!(o.time>=n.start.time&&o.time<n.end.time+At))return[NaN,NaN];var r=o.day,s=this._getRangeInfo([n.start.time,i]).nthWeek;return this._orient==="vertical"?[this._rect.x+r*this._sw+this._sw/2,this._rect.y+s*this._sh+this._sh/2]:[this._rect.x+s*this._sw+this._sw/2,this._rect.y+r*this._sh+this._sh/2]},a.prototype.pointToData=function(e){var t=this.pointToDate(e);return t&&t.time},a.prototype.dataToRect=function(e,t){var o=this.dataToPoint(e,t);return{contentShape:{x:o[0]-(this._sw-this._lineWidth)/2,y:o[1]-(this._sh-this._lineWidth)/2,width:this._sw-this._lineWidth,height:this._sh-this._lineWidth},center:o,tl:[o[0]-this._sw/2,o[1]-this._sh/2],tr:[o[0]+this._sw/2,o[1]-this._sh/2],br:[o[0]+this._sw/2,o[1]+this._sh/2],bl:[o[0]-this._sw/2,o[1]+this._sh/2]}},a.prototype.pointToDate=function(e){var t=Math.floor((e[0]-this._rect.x)/this._sw)+1,o=Math.floor((e[1]-this._rect.y)/this._sh)+1,n=this._rangeInfo.range;return this._orient==="vertical"?this._getDateByWeeksAndDay(o,t-1,n):this._getDateByWeeksAndDay(t,o-1,n)},a.prototype.convertToPixel=function(e,t,o){var n=Ka(t);return n===this?n.dataToPoint(o):null},a.prototype.convertFromPixel=function(e,t,o){var n=Ka(t);return n===this?n.pointToData(o):null},a.prototype.containPoint=function(e){return console.warn("Not implemented."),!1},a.prototype._initRangeOption=function(){var e=this._model.get("range"),t;if(F(e)&&e.length===1&&(e=e[0]),F(e))t=e;else{var o=e.toString();if(/^\d{4}$/.test(o)&&(t=[o+"-01-01",o+"-12-31"]),/^\d{4}[\/|-]\d{1,2}$/.test(o)){var n=this.getDateInfo(o),i=n.date;i.setMonth(i.getMonth()+1);var r=this.getNextNDay(i,-1);t=[n.formatedDate,r.formatedDate]}/^\d{4}[\/|-]\d{1,2}[\/|-]\d{1,2}$/.test(o)&&(t=[o,o])}if(!t)return e;var s=this._getRangeInfo(t);return s.start.time>s.end.time&&t.reverse(),t},a.prototype._getRangeInfo=function(e){var t=[this.getDateInfo(e[0]),this.getDateInfo(e[1])],o;t[0].time>t[1].time&&(o=!0,t.reverse());var n=Math.floor(t[1].time/At)-Math.floor(t[0].time/At)+1,i=new Date(t[0].time),r=i.getDate(),s=t[1].date.getDate();i.setDate(r+n-1);var l=i.getDate();if(l!==s)for(var u=i.getTime()-t[1].time>0?1:-1;(l=i.getDate())!==s&&(i.getTime()-t[1].time)*u>0;)n-=u,i.setDate(l-u);var c=Math.floor((n+t[0].day+6)/7),d=o?-c+1:c-1;return o&&t.reverse(),{range:[t[0].formatedDate,t[1].formatedDate],start:t[0],end:t[1],allDay:n,weeks:c,nthWeek:d,fweek:t[0].day,lweek:t[1].day}},a.prototype._getDateByWeeksAndDay=function(e,t,o){var n=this._getRangeInfo(o);if(e>n.weeks||e===0&&t<n.fweek||e===n.weeks&&t>n.lweek)return null;var i=(e-1)*7-n.fweek+t,r=new Date(n.start.time);return r.setDate(+n.start.d+i),this.getDateInfo(r)},a.create=function(e,t){var o=[];return e.eachComponent("calendar",function(n){var i=new a(n);o.push(i),n.coordinateSystem=i}),e.eachSeries(function(n){n.get("coordinateSystem")==="calendar"&&(n.coordinateSystem=o[n.get("calendarIndex")||0])}),o},a.dimensions=["time","value"],a}();function Ka(a){var e=a.calendarModel,t=a.seriesModel,o=e?e.coordinateSystem:t?t.coordinateSystem:null;return o}const gs=vs;function ms(a){a.registerComponentModel(ps),a.registerComponentView(fs),a.registerCoordinateSystem("calendar",gs)}var ys=function(a){k(e,a);function e(){var t=a!==null&&a.apply(this,arguments)||this;return t.type=e.type,t}return e.type="dataZoom.select",e}(Zi);const _s=ys;var bs=function(a){k(e,a);function e(){var t=a!==null&&a.apply(this,arguments)||this;return t.type=e.type,t}return e.type="dataZoom.select",e}(Hi);const Ss=bs;function xs(a){a.registerComponentModel(_s),a.registerComponentView(Ss),ji(a)}var te=function(){function a(){}return a}(),ln={};function ze(a,e){ln[a]=e}function un(a){return ln[a]}var Cs=function(a){k(e,a);function e(){var t=a!==null&&a.apply(this,arguments)||this;return t.type=e.type,t}return e.prototype.optionUpdated=function(){a.prototype.optionUpdated.apply(this,arguments);var t=this.ecModel;P(this.option.feature,function(o,n){var i=un(n);i&&(i.getDefaultOption&&(i.defaultOption=i.getDefaultOption(t)),se(o,i.defaultOption))})},e.type="toolbox",e.layoutMode={type:"box",ignoreSize:!0},e.defaultOption={show:!0,z:6,orient:"horizontal",left:"right",top:"top",backgroundColor:"transparent",borderColor:"#ccc",borderRadius:0,borderWidth:0,padding:5,itemSize:15,itemGap:8,showTitle:!0,iconStyle:{borderColor:"#666",color:"none"},emphasis:{iconStyle:{borderColor:"#3E98C5"}},tooltip:{show:!1,position:"bottom"}},e}(it);const ws=Cs;var As=function(a){k(e,a);function e(){return a!==null&&a.apply(this,arguments)||this}return e.prototype.render=function(t,o,n,i){var r=this.group;if(r.removeAll(),!t.get("show"))return;var s=+t.get("itemSize"),l=t.get("orient")==="vertical",u=t.get("feature")||{},c=this._features||(this._features={}),d=[];P(u,function(v,h){d.push(h)}),new Bo(this._featureNames||[],d).add(p).update(p).remove(Z(p,null)).execute(),this._featureNames=d;function p(v,h){var g=d[v],y=d[h],_=u[g],b=new ai(_,t,t.ecModel),f;if(i&&i.newTitle!=null&&i.featureName===g&&(_.title=i.newTitle),g&&!y){if(Ps(g))f={onclick:b.option.onclick,featureName:g};else{var S=un(g);if(!S)return;f=new S}c[g]=f}else if(f=c[y],!f)return;f.uid=oi("toolbox-feature"),f.model=b,f.ecModel=o,f.api=n;var x=f instanceof te;if(!g&&y){x&&f.dispose&&f.dispose(o,n);return}if(!b.get("show")||x&&f.unusable){x&&f.remove&&f.remove(o,n);return}m(b,f,g),b.setIconStatus=function(w,D){var L=this.option,C=this.iconPaths;L.iconStatus=L.iconStatus||{},L.iconStatus[w]=D,C[w]&&(D==="emphasis"?Et:zt)(C[w])},f instanceof te&&f.render&&f.render(b,o,n,i)}function m(v,h,g){var y=v.getModel("iconStyle"),_=v.getModel(["emphasis","iconStyle"]),b=h instanceof te&&h.getIcons?h.getIcons():v.get("icon"),f=v.get("title")||{},S,x;he(b)?(S={},S[g]=b):S=b,he(f)?(x={},x[g]=f):x=f;var w=v.iconPaths={};P(S,function(D,L){var C=Ro(D,{},{x:-s/2,y:-s/2,width:s,height:s});C.setStyle(y.getItemStyle());var A=C.ensureState("emphasis");A.style=_.getItemStyle();var N=new Ae({style:{text:x[L],align:_.get("textAlign"),borderRadius:_.get("textBorderRadius"),padding:_.get("textPadding"),fill:null},ignore:!0});C.setTextContent(N),ni({el:C,componentModel:t,itemName:L,formatterParamsExtra:{title:x[L]}}),C.__title=x[L],C.on("mouseover",function(){var R=_.getItemStyle(),H=l?t.get("right")==null&&t.get("left")!=="right"?"right":"left":t.get("bottom")==null&&t.get("top")!=="bottom"?"bottom":"top";N.setStyle({fill:_.get("textFill")||R.fill||R.stroke||"#000",backgroundColor:_.get("textBackgroundColor")}),C.setTextConfig({position:_.get("textPosition")||H}),N.ignore=!t.get("showTitle"),n.enterEmphasis(this)}).on("mouseout",function(){v.get(["iconStatus",L])!=="emphasis"&&n.leaveEmphasis(this),N.hide()}),(v.get(["iconStatus",L])==="emphasis"?Et:zt)(C),r.add(C),C.on("click",re(h.onclick,h,o,n,L)),w[L]=C})}ii(r,t,n),r.add(ri(r.getBoundingRect(),t)),l||r.eachChild(function(v){var h=v.__title,g=v.ensureState("emphasis"),y=g.textConfig||(g.textConfig={}),_=v.getTextContent(),b=_&&_.ensureState("emphasis");if(b&&!We(b)&&h){var f=b.style||(b.style={}),S=si(h,Ae.makeFont(f)),x=v.x+r.x,w=v.y+r.y+s,D=!1;w+S.height>n.getHeight()&&(y.position="top",D=!0);var L=D?-5-S.height:s+10;x+S.width/2>n.getWidth()?(y.position=["100%",L],f.align="right"):x-S.width/2<0&&(y.position=[0,L],f.align="left")}})},e.prototype.updateView=function(t,o,n,i){P(this._features,function(r){r instanceof te&&r.updateView&&r.updateView(r.model,o,n,i)})},e.prototype.remove=function(t,o){P(this._features,function(n){n instanceof te&&n.remove&&n.remove(t,o)}),this.group.removeAll()},e.prototype.dispose=function(t,o){P(this._features,function(n){n instanceof te&&n.dispose&&n.dispose(t,o)})},e.type="toolbox",e}(rt);function Ps(a){return a.indexOf("my")===0}const Ts=As;var Ds=function(a){k(e,a);function e(){return a!==null&&a.apply(this,arguments)||this}return e.prototype.onclick=function(t,o){var n=this.model,i=n.get("name")||t.get("title.0.text")||"echarts",r=o.getZr().painter.getType()==="svg",s=r?"svg":n.get("type",!0)||"png",l=o.getConnectedDataURL({type:s,backgroundColor:n.get("backgroundColor",!0)||t.get("backgroundColor")||"#fff",connectedBackgroundColor:n.get("connectedBackgroundColor"),excludeComponents:n.get("excludeComponents"),pixelRatio:n.get("pixelRatio")}),u=$o.browser;if(We(MouseEvent)&&(u.newEdge||!u.ie&&!u.edge)){var c=document.createElement("a");c.download=i+"."+s,c.target="_blank",c.href=l;var d=new MouseEvent("click",{view:document.defaultView,bubbles:!0,cancelable:!1});c.dispatchEvent(d)}else if(window.navigator.msSaveOrOpenBlob||r){var p=l.split(","),m=p[0].indexOf("base64")>-1,v=r?decodeURIComponent(p[1]):p[1];m&&(v=window.atob(v));var h=i+"."+s;if(window.navigator.msSaveOrOpenBlob){for(var g=v.length,y=new Uint8Array(g);g--;)y[g]=v.charCodeAt(g);var _=new Blob([y]);window.navigator.msSaveOrOpenBlob(_,h)}else{var b=document.createElement("iframe");document.body.appendChild(b);var f=b.contentWindow,S=f.document;S.open("image/svg+xml","replace"),S.write(v),S.close(),f.focus(),S.execCommand("SaveAs",!0,h),document.body.removeChild(b)}}else{var x=n.get("lang"),w='<body style="margin:0;"><img src="'+l+'" style="max-width:100%;" title="'+(x&&x[0]||"")+'" /></body>',D=window.open();D.document.write(w),D.document.title=i}},e.getDefaultOption=function(t){var o={show:!0,icon:"M4.7,22.9L29.3,45.5L54.7,23.4M4.6,43.6L4.6,58L53.8,58L53.8,43.6M29.2,45.1L29.2,0",title:t.getLocaleModel().get(["toolbox","saveAsImage","title"]),type:"png",connectedBackgroundColor:"#fff",name:"",excludeComponents:["toolbox"],lang:t.getLocaleModel().get(["toolbox","saveAsImage","lang"])};return o},e}(te);const Ls=Ds;var Ya="__ec_magicType_stack__",Is=[["line","bar"],["stack"]],Os=function(a){k(e,a);function e(){return a!==null&&a.apply(this,arguments)||this}return e.prototype.getIcons=function(){var t=this.model,o=t.get("icon"),n={};return P(t.get("type"),function(i){o[i]&&(n[i]=o[i])}),n},e.getDefaultOption=function(t){var o={show:!0,type:[],icon:{line:"M4.1,28.9h7.1l9.3-22l7.4,38l9.7-19.7l3,12.8h14.9M4.1,58h51.4",bar:"M6.7,22.9h10V48h-10V22.9zM24.9,13h10v35h-10V13zM43.2,2h10v46h-10V2zM3.1,58h53.7",stack:"M8.2,38.4l-8.4,4.1l30.6,15.3L60,42.5l-8.1-4.1l-21.5,11L8.2,38.4z M51.9,30l-8.1,4.2l-13.4,6.9l-13.9-6.9L8.2,30l-8.4,4.2l8.4,4.2l22.2,11l21.5-11l8.1-4.2L51.9,30z M51.9,21.7l-8.1,4.2L35.7,30l-5.3,2.8L24.9,30l-8.4-4.1l-8.3-4.2l-8.4,4.2L8.2,30l8.3,4.2l13.9,6.9l13.4-6.9l8.1-4.2l8.1-4.1L51.9,21.7zM30.4,2.2L-0.2,17.5l8.4,4.1l8.3,4.2l8.4,4.2l5.5,2.7l5.3-2.7l8.1-4.2l8.1-4.2l8.1-4.1L30.4,2.2z"},title:t.getLocaleModel().get(["toolbox","magicType","title"]),option:{},seriesIndex:{}};return o},e.prototype.onclick=function(t,o,n){var i=this.model,r=i.get(["seriesIndex",n]);if(qa[n]){var s={series:[]},l=function(d){var p=d.subType,m=d.id,v=qa[n](p,m,d,i);v&&(Ie(v,d.option),s.series.push(v));var h=d.coordinateSystem;if(h&&h.type==="cartesian2d"&&(n==="line"||n==="bar")){var g=h.getAxesByScale("ordinal")[0];if(g){var y=g.dim,_=y+"Axis",b=d.getReferringComponents(_,li).models[0],f=b.componentIndex;s[_]=s[_]||[];for(var S=0;S<=f;S++)s[_][f]=s[_][f]||{};s[_][f].boundaryGap=n==="bar"}}};P(Is,function(d){me(d,n)>=0&&P(d,function(p){i.setIconStatus(p,"normal")})}),i.setIconStatus(n,"emphasis"),t.eachComponent({mainType:"series",query:r==null?null:{seriesIndex:r}},l);var u,c=n;n==="stack"&&(u=se({stack:i.option.title.tiled,tiled:i.option.title.stack},i.option.title),i.get(["iconStatus",n])!=="emphasis"&&(c="tiled")),o.dispatchAction({type:"changeMagicType",currentType:c,newOption:s,newTitle:u,featureName:"magicType"})}},e}(te),qa={line:function(a,e,t,o){if(a==="bar")return se({id:e,type:"line",data:t.get("data"),stack:t.get("stack"),markPoint:t.get("markPoint"),markLine:t.get("markLine")},o.get(["option","line"])||{},!0)},bar:function(a,e,t,o){if(a==="line")return se({id:e,type:"bar",data:t.get("data"),stack:t.get("stack"),markPoint:t.get("markPoint"),markLine:t.get("markLine")},o.get(["option","bar"])||{},!0)},stack:function(a,e,t,o){var n=t.get("stack")===Ya;if(a==="line"||a==="bar")return o.setIconStatus("stack",n?"normal":"emphasis"),se({id:e,stack:n?"":Ya},o.get(["option","stack"])||{},!0)}};ra({type:"changeMagicType",event:"magicTypeChanged",update:"prepareAndUpdate"},function(a,e){e.mergeOption(a.newOption)});const ks=Os;var lt=new Array(60).join("-"),De="	";function Ms(a){var e={},t=[],o=[];return a.eachRawSeries(function(n){var i=n.coordinateSystem;if(i&&(i.type==="cartesian2d"||i.type==="polar")){var r=i.getBaseAxis();if(r.type==="category"){var s=r.dim+"_"+r.index;e[s]||(e[s]={categoryAxis:r,valueAxis:i.getOtherAxis(r),series:[]},o.push({axisDim:r.dim,axisIndex:r.index})),e[s].series.push(n)}else t.push(n)}else t.push(n)}),{seriesGroupByCategoryAxis:e,other:t,meta:o}}function Bs(a){var e=[];return P(a,function(t,o){var n=t.categoryAxis,i=t.valueAxis,r=i.dim,s=[" "].concat(U(t.series,function(m){return m.name})),l=[n.model.getCategories()];P(t.series,function(m){var v=m.getRawData();l.push(m.getRawData().mapArray(v.mapDimension(r),function(h){return h}))});for(var u=[s.join(De)],c=0;c<l[0].length;c++){for(var d=[],p=0;p<l.length;p++)d.push(l[p][c]);u.push(d.join(De))}e.push(u.join(`
`))}),e.join(`

`+lt+`

`)}function Vs(a){return U(a,function(e){var t=e.getRawData(),o=[e.name],n=[];return t.each(t.dimensions,function(){for(var i=arguments.length,r=arguments[i-1],s=t.getName(r),l=0;l<i-1;l++)n[l]=arguments[l];o.push((s?s+De:"")+n.join(De))}),o.join(`
`)}).join(`

`+lt+`

`)}function Ns(a){var e=Ms(a);return{value:Fo([Bs(e.seriesGroupByCategoryAxis),Vs(e.other)],function(t){return!!t.replace(/[\n\t\s]/g,"")}).join(`

`+lt+`

`),meta:e.meta}}function Qe(a){return a.replace(/^\s\s*/,"").replace(/\s\s*$/,"")}function Es(a){var e=a.slice(0,a.indexOf(`
`));if(e.indexOf(De)>=0)return!0}var jt=new RegExp("["+De+"]+","g");function zs(a){for(var e=a.split(/\n+/g),t=Qe(e.shift()).split(jt),o=[],n=U(t,function(l){return{name:l,data:[]}}),i=0;i<e.length;i++){var r=Qe(e[i]).split(jt);o.push(r.shift());for(var s=0;s<r.length;s++)n[s]&&(n[s].data[i]=r[s])}return{series:n,categories:o}}function Rs(a){for(var e=a.split(/\n+/g),t=Qe(e.shift()),o=[],n=0;n<e.length;n++){var i=Qe(e[n]);if(i){var r=i.split(jt),s="",l=void 0,u=!1;isNaN(r[0])?(u=!0,s=r[0],r=r.slice(1),o[n]={name:s,value:[]},l=o[n].value):l=o[n]=[];for(var c=0;c<r.length;c++)l.push(+r[c]);l.length===1&&(u?o[n].value=l[0]:o[n]=l[0])}}return{name:t,data:o}}function $s(a,e){var t=a.split(new RegExp(`
*`+lt+`
*`,"g")),o={series:[]};return P(t,function(n,i){if(Es(n)){var r=zs(n),s=e[i],l=s.axisDim+"Axis";s&&(o[l]=o[l]||[],o[l][s.axisIndex]={data:r.categories},o.series=o.series.concat(r.series))}else{var r=Rs(n);o.series.push(r)}}),o}var Fs=function(a){k(e,a);function e(){return a!==null&&a.apply(this,arguments)||this}return e.prototype.onclick=function(t,o){setTimeout(function(){o.dispatchAction({type:"hideTip"})});var n=o.getDom(),i=this.model;this._dom&&n.removeChild(this._dom);var r=document.createElement("div");r.style.cssText="position:absolute;top:0;bottom:0;left:0;right:0;padding:5px",r.style.backgroundColor=i.get("backgroundColor")||"#fff";var s=document.createElement("h4"),l=i.get("lang")||[];s.innerHTML=l[0]||i.get("title"),s.style.cssText="margin:10px 20px",s.style.color=i.get("textColor");var u=document.createElement("div"),c=document.createElement("textarea");u.style.cssText="overflow:auto";var d=i.get("optionToContent"),p=i.get("contentToOption"),m=Ns(t);if(We(d)){var v=d(o.getOption());he(v)?u.innerHTML=v:ui(v)&&u.appendChild(v)}else{c.readOnly=i.get("readOnly");var h=c.style;h.cssText="display:block;width:100%;height:100%;font-family:monospace;font-size:14px;line-height:1.6rem;resize:none;box-sizing:border-box;outline:none",h.color=i.get("textColor"),h.borderColor=i.get("textareaBorderColor"),h.backgroundColor=i.get("textareaColor"),c.value=m.value,u.appendChild(c)}var g=m.meta,y=document.createElement("div");y.style.cssText="position:absolute;bottom:5px;left:0;right:0";var _="float:right;margin-right:20px;border:none;cursor:pointer;padding:2px 5px;font-size:12px;border-radius:3px",b=document.createElement("div"),f=document.createElement("div");_+=";background-color:"+i.get("buttonColor"),_+=";color:"+i.get("buttonTextColor");var S=this;function x(){n.removeChild(r),S._dom=null}La(b,"click",x),La(f,"click",function(){if(p==null&&d!=null||p!=null&&d==null){x();return}var w;try{We(p)?w=p(u,o.getOption()):w=$s(c.value,g)}catch(D){throw x(),new Error("Data view format error "+D)}w&&o.dispatchAction({type:"changeDataView",newOption:w}),x()}),b.innerHTML=l[1],f.innerHTML=l[2],f.style.cssText=b.style.cssText=_,!i.get("readOnly")&&y.appendChild(f),y.appendChild(b),r.appendChild(s),r.appendChild(u),r.appendChild(y),u.style.height=n.clientHeight-80+"px",n.appendChild(r),this._dom=r},e.prototype.remove=function(t,o){this._dom&&o.getDom().removeChild(this._dom)},e.prototype.dispose=function(t,o){this.remove(t,o)},e.getDefaultOption=function(t){var o={show:!0,readOnly:!1,optionToContent:null,contentToOption:null,icon:"M17.5,17.3H33 M17.5,17.3H33 M45.4,29.5h-28 M11.5,2v56H51V14.8L38.4,2H11.5z M38.4,2.2v12.7H51 M45.4,41.7h-28",title:t.getLocaleModel().get(["toolbox","dataView","title"]),lang:t.getLocaleModel().get(["toolbox","dataView","lang"]),backgroundColor:"#fff",textColor:"#000",textareaColor:"#fff",textareaBorderColor:"#333",buttonColor:"#c23531",buttonTextColor:"#fff"};return o},e}(te);function Ws(a,e){return U(a,function(t,o){var n=e&&e[o];if(Fe(n)&&!F(n)){var i=Fe(t)&&!F(t);i||(t={value:t});var r=n.name!=null&&t.name==null;return t=Ie(t,n),r&&delete t.name,t}else return t})}ra({type:"changeDataView",event:"dataViewChanged",update:"prepareAndUpdate"},function(a,e){var t=[];P(a.newOption.series,function(o){var n=e.getSeriesByName(o.name)[0];if(!n)t.push(ue({type:"scatter"},o));else{var i=n.get("data");t.push({name:o.name,data:Ws(o.data,i)})}}),e.mergeOption(Ie({series:t},a.newOption))});const Gs=Fs;var cn=P,dn=Ue();function Us(a,e){var t=ha(a);cn(e,function(o,n){for(var i=t.length-1;i>=0;i--){var r=t[i];if(r[n])break}if(i<0){var s=a.queryComponents({mainType:"dataZoom",subType:"select",id:n})[0];if(s){var l=s.getPercentRange();t[0][n]={dataZoomId:n,start:l[0],end:l[1]}}}}),t.push(e)}function Zs(a){var e=ha(a),t=e[e.length-1];e.length>1&&e.pop();var o={};return cn(t,function(n,i){for(var r=e.length-1;r>=0;r--)if(n=e[r][i],n){o[i]=n;break}}),o}function Hs(a){dn(a).snapshots=null}function js(a){return ha(a).length}function ha(a){var e=dn(a);return e.snapshots||(e.snapshots=[{}]),e.snapshots}var Ks=function(a){k(e,a);function e(){return a!==null&&a.apply(this,arguments)||this}return e.prototype.onclick=function(t,o){Hs(t),o.dispatchAction({type:"restore",from:this.uid})},e.getDefaultOption=function(t){var o={show:!0,icon:"M3.8,33.4 M47,18.9h9.8V8.7 M56.3,20.1 C52.1,9,40.5,0.6,26.8,2.1C12.6,3.7,1.6,16.2,2.1,30.6 M13,41.1H3.1v10.2 M3.7,39.9c4.2,11.1,15.8,19.5,29.5,18 c14.2-1.6,25.2-14.1,24.7-28.5",title:t.getLocaleModel().get(["toolbox","restore","title"])};return o},e}(te);ra({type:"restore",event:"restore",update:"prepareAndUpdate"},function(a,e){e.resetOption("recreate")});const Ys=Ks;var qs=["grid","xAxis","yAxis","geo","graph","polar","radiusAxis","angleAxis","bmap"],Xs=function(){function a(e,t,o){var n=this;this._targetInfoList=[];var i=Xa(t,e);P(Js,function(r,s){(!o||!o.include||me(o.include,s)>=0)&&r(i,n._targetInfoList)})}return a.prototype.setOutputRanges=function(e,t){return this.matchOutputRanges(e,t,function(o,n,i){if((o.coordRanges||(o.coordRanges=[])).push(n),!o.coordRange){o.coordRange=n;var r=Pt[o.brushType](0,i,n);o.__rangeOffset={offset:to[o.brushType](r.values,o.range,[1,1]),xyMinMax:r.xyMinMax}}}),e},a.prototype.matchOutputRanges=function(e,t,o){P(e,function(n){var i=this.findTargetInfo(n,t);i&&i!==!0&&P(i.coordSyses,function(r){var s=Pt[n.brushType](1,r,n.range,!0);o(n,s.values,r,t)})},this)},a.prototype.setInputRanges=function(e,t){P(e,function(o){var n=this.findTargetInfo(o,t);if(o.range=o.range||[],n&&n!==!0){o.panelId=n.panelId;var i=Pt[o.brushType](0,n.coordSys,o.coordRange),r=o.__rangeOffset;o.range=r?to[o.brushType](i.values,r.offset,Qs(i.xyMinMax,r.xyMinMax)):i.values}},this)},a.prototype.makePanelOpts=function(e,t){return U(this._targetInfoList,function(o){var n=o.getPanelRect();return{panelId:o.panelId,defaultBrushType:t?t(o):null,clipPath:Fr(n),isTargetByCursor:Gr(n,e,o.coordSysModel),getLinearBrushOtherExtent:Wr(n)}})},a.prototype.controlSeries=function(e,t,o){var n=this.findTargetInfo(e,o);return n===!0||n&&me(n.coordSyses,t.coordinateSystem)>=0},a.prototype.findTargetInfo=function(e,t){for(var o=this._targetInfoList,n=Xa(t,e),i=0;i<o.length;i++){var r=o[i],s=e.panelId;if(s){if(r.panelId===s)return r}else for(var l=0;l<Ja.length;l++)if(Ja[l](n,r))return r}return!0},a}();function Kt(a){return a[0]>a[1]&&a.reverse(),a}function Xa(a,e){return Wo(a,e,{includeMainTypes:qs})}var Js={grid:function(a,e){var t=a.xAxisModels,o=a.yAxisModels,n=a.gridModels,i=Go(),r={},s={};!t&&!o&&!n||(P(t,function(l){var u=l.axis.grid.model;i.set(u.id,u),r[u.id]=!0}),P(o,function(l){var u=l.axis.grid.model;i.set(u.id,u),s[u.id]=!0}),P(n,function(l){i.set(l.id,l),r[l.id]=!0,s[l.id]=!0}),i.each(function(l){var u=l.coordinateSystem,c=[];P(u.getCartesians(),function(d,p){(me(t,d.getAxis("x").model)>=0||me(o,d.getAxis("y").model)>=0)&&c.push(d)}),e.push({panelId:"grid--"+l.id,gridModel:l,coordSysModel:l,coordSys:c[0],coordSyses:c,getPanelRect:Qa.grid,xAxisDeclared:r[l.id],yAxisDeclared:s[l.id]})}))},geo:function(a,e){P(a.geoModels,function(t){var o=t.coordinateSystem;e.push({panelId:"geo--"+t.id,geoModel:t,coordSysModel:t,coordSys:o,coordSyses:[o],getPanelRect:Qa.geo})})}},Ja=[function(a,e){var t=a.xAxisModel,o=a.yAxisModel,n=a.gridModel;return!n&&t&&(n=t.axis.grid.model),!n&&o&&(n=o.axis.grid.model),n&&n===e.gridModel},function(a,e){var t=a.geoModel;return t&&t===e.geoModel}],Qa={grid:function(){return this.coordSys.master.getRect().clone()},geo:function(){var a=this.coordSys,e=a.getBoundingRect().clone();return e.applyTransform(No(a)),e}},Pt={lineX:Z(eo,0),lineY:Z(eo,1),rect:function(a,e,t,o){var n=a?e.pointToData([t[0][0],t[1][0]],o):e.dataToPoint([t[0][0],t[1][0]],o),i=a?e.pointToData([t[0][1],t[1][1]],o):e.dataToPoint([t[0][1],t[1][1]],o),r=[Kt([n[0],i[0]]),Kt([n[1],i[1]])];return{values:r,xyMinMax:r}},polygon:function(a,e,t,o){var n=[[1/0,-1/0],[1/0,-1/0]],i=U(t,function(r){var s=a?e.pointToData(r,o):e.dataToPoint(r,o);return n[0][0]=Math.min(n[0][0],s[0]),n[1][0]=Math.min(n[1][0],s[1]),n[0][1]=Math.max(n[0][1],s[0]),n[1][1]=Math.max(n[1][1],s[1]),s});return{values:i,xyMinMax:n}}};function eo(a,e,t,o){var n=t.getAxis(["x","y"][a]),i=Kt(U([0,1],function(s){return e?n.coordToData(n.toLocalCoord(o[s]),!0):n.toGlobalCoord(n.dataToCoord(o[s]))})),r=[];return r[a]=i,r[1-a]=[NaN,NaN],{values:i,xyMinMax:r}}var to={lineX:Z(ao,0),lineY:Z(ao,1),rect:function(a,e,t){return[[a[0][0]-t[0]*e[0][0],a[0][1]-t[0]*e[0][1]],[a[1][0]-t[1]*e[1][0],a[1][1]-t[1]*e[1][1]]]},polygon:function(a,e,t){return U(a,function(o,n){return[o[0]-t[0]*e[n][0],o[1]-t[1]*e[n][1]]})}};function ao(a,e,t,o){return[e[0]-o[a]*t[0],e[1]-o[a]*t[1]]}function Qs(a,e){var t=oo(a),o=oo(e),n=[t[0]/o[0],t[1]/o[1]];return isNaN(n[0])&&(n[0]=1),isNaN(n[1])&&(n[1]=1),n}function oo(a){return a?[a[0][1]-a[0][0],a[1][1]-a[1][0]]:[NaN,NaN]}const pn=Xs;var Yt=P,el=di("toolbox-dataZoom_"),tl=function(a){k(e,a);function e(){return a!==null&&a.apply(this,arguments)||this}return e.prototype.render=function(t,o,n,i){this._brushController||(this._brushController=new $r(n.getZr()),this._brushController.on("brush",re(this._onBrush,this)).mount()),nl(t,o,this,i,n),ol(t,o)},e.prototype.onclick=function(t,o,n){al[n].call(this)},e.prototype.remove=function(t,o){this._brushController&&this._brushController.unmount()},e.prototype.dispose=function(t,o){this._brushController&&this._brushController.dispose()},e.prototype._onBrush=function(t){var o=t.areas;if(!t.isEnd||!o.length)return;var n={},i=this.ecModel;this._brushController.updateCovers([]);var r=new pn(fa(this.model),i,{include:["grid"]});r.matchOutputRanges(o,i,function(u,c,d){if(d.type==="cartesian2d"){var p=u.brushType;p==="rect"?(s("x",d,c[0]),s("y",d,c[1])):s({lineX:"x",lineY:"y"}[p],d,c)}}),Us(i,n),this._dispatchZoomAction(n);function s(u,c,d){var p=c.getAxis(u),m=p.model,v=l(u,m,i),h=v.findRepresentativeAxisProxy(m).getMinMaxSpan();(h.minValueSpan!=null||h.maxValueSpan!=null)&&(d=Ki(0,d.slice(),p.scale.getExtent(),0,h.minValueSpan,h.maxValueSpan)),v&&(n[v.id]={dataZoomId:v.id,startValue:d[0],endValue:d[1]})}function l(u,c,d){var p;return d.eachComponent({mainType:"dataZoom",subType:"select"},function(m){var v=m.getAxisModel(u,c.componentIndex);v&&(p=m)}),p}},e.prototype._dispatchZoomAction=function(t){var o=[];Yt(t,function(n,i){o.push(le(n))}),o.length&&this.api.dispatchAction({type:"dataZoom",from:this.uid,batch:o})},e.getDefaultOption=function(t){var o={show:!0,filterMode:"filter",icon:{zoom:"M0,13.5h26.9 M13.5,26.9V0 M32.1,13.5H58V58H13.5 V32.1",back:"M22,1.4L9.9,13.5l12.3,12.3 M10.3,13.5H54.9v44.6 H10.3v-26"},title:t.getLocaleModel().get(["toolbox","dataZoom","title"]),brushStyle:{borderWidth:0,color:"rgba(210,219,238,0.2)"}};return o},e}(te),al={zoom:function(){var a=!this._isZoomActive;this.api.dispatchAction({type:"takeGlobalCursor",key:"dataZoomSelect",dataZoomSelectActive:a})},back:function(){this._dispatchZoomAction(Zs(this.ecModel))}};function fa(a){var e={xAxisIndex:a.get("xAxisIndex",!0),yAxisIndex:a.get("yAxisIndex",!0),xAxisId:a.get("xAxisId",!0),yAxisId:a.get("yAxisId",!0)};return e.xAxisIndex==null&&e.xAxisId==null&&(e.xAxisIndex="all"),e.yAxisIndex==null&&e.yAxisId==null&&(e.yAxisIndex="all"),e}function ol(a,e){a.setIconStatus("back",js(e)>1?"emphasis":"normal")}function nl(a,e,t,o,n){var i=t._isZoomActive;o&&o.type==="takeGlobalCursor"&&(i=o.key==="dataZoomSelect"?o.dataZoomSelectActive:!1),t._isZoomActive=i,a.setIconStatus("zoom",i?"emphasis":"normal");var r=new pn(fa(a),e,{include:["grid"]}),s=r.makePanelOpts(n,function(l){return l.xAxisDeclared&&!l.yAxisDeclared?"lineX":!l.xAxisDeclared&&l.yAxisDeclared?"lineY":"rect"});t._brushController.setPanels(s).enableBrush(i&&s.length?{brushType:"auto",brushStyle:a.getModel("brushStyle").getItemStyle()}:!1)}ci("dataZoom",function(a){var e=a.getComponent("toolbox",0),t=["feature","dataZoom"];if(!e||e.get(t)==null)return;var o=e.getModel(t),n=[],i=fa(o),r=Wo(a,i);Yt(r.xAxisModels,function(l){return s(l,"xAxis","xAxisIndex")}),Yt(r.yAxisModels,function(l){return s(l,"yAxis","yAxisIndex")});function s(l,u,c){var d=l.componentIndex,p={type:"select",$fromToolbox:!0,filterMode:o.get("filterMode",!0)||"filter",id:el+u+d};p[c]=d,n.push(p)}return n});const il=tl;function rl(a){a.registerComponentModel(ws),a.registerComponentView(Ts),ze("saveAsImage",Ls),ze("magicType",ks),ze("dataView",Gs),ze("dataZoom",il),ze("restore",Ys),aa(xs)}var sl=function(a){k(e,a);function e(){var t=a!==null&&a.apply(this,arguments)||this;return t.type=e.type,t.layoutMode="box",t}return e.prototype.init=function(t,o,n){this.mergeDefaultAndTheme(t,n),this._initData()},e.prototype.mergeOption=function(t){a.prototype.mergeOption.apply(this,arguments),this._initData()},e.prototype.setCurrentIndex=function(t){t==null&&(t=this.option.currentIndex);var o=this._data.count();this.option.loop?t=(t%o+o)%o:(t>=o&&(t=o-1),t<0&&(t=0)),this.option.currentIndex=t},e.prototype.getCurrentIndex=function(){return this.option.currentIndex},e.prototype.isIndexMax=function(){return this.getCurrentIndex()>=this._data.count()-1},e.prototype.setPlayState=function(t){this.option.autoPlay=!!t},e.prototype.getPlayState=function(){return!!this.option.autoPlay},e.prototype._initData=function(){var t=this.option,o=t.data||[],n=t.axisType,i=this._names=[],r;n==="category"?(r=[],P(o,function(u,c){var d=pi(hi(u),""),p;Fe(u)?(p=le(u),p.value=c):p=c,r.push(p),i.push(d)})):r=o;var s={category:"ordinal",time:"time",value:"number"}[n]||"number",l=this._data=new Xe([{name:"value",type:s}],this);l.initData(r,i)},e.prototype.getData=function(){return this._data},e.prototype.getCategories=function(){if(this.get("axisType")==="category")return this._names.slice()},e.type="timeline",e.defaultOption={z:4,show:!0,axisType:"time",realtime:!0,left:"20%",top:null,right:"20%",bottom:0,width:null,height:40,padding:5,controlPosition:"left",autoPlay:!1,rewind:!1,loop:!0,playInterval:2e3,currentIndex:0,itemStyle:{},label:{color:"#000"},data:[]},e}(it);const no=sl;var hn=function(a){k(e,a);function e(){var t=a!==null&&a.apply(this,arguments)||this;return t.type=e.type,t}return e.type="timeline.slider",e.defaultOption=fi(no.defaultOption,{backgroundColor:"rgba(0,0,0,0)",borderColor:"#ccc",borderWidth:0,orient:"horizontal",inverse:!1,tooltip:{trigger:"item"},symbol:"circle",symbolSize:12,lineStyle:{show:!0,width:2,color:"#DAE1F5"},label:{position:"auto",show:!0,interval:"auto",rotate:0,color:"#A4B1D7"},itemStyle:{color:"#A4B1D7",borderWidth:1},checkpointStyle:{symbol:"circle",symbolSize:15,color:"#316bf3",borderColor:"#fff",borderWidth:2,shadowBlur:2,shadowOffsetX:1,shadowOffsetY:1,shadowColor:"rgba(0, 0, 0, 0.3)",animation:!0,animationDuration:300,animationEasing:"quinticInOut"},controlStyle:{show:!0,showPlayBtn:!0,showPrevBtn:!0,showNextBtn:!0,itemSize:24,itemGap:12,position:"left",playIcon:"path://M31.6,53C17.5,53,6,41.5,6,27.4S17.5,1.8,31.6,1.8C45.7,1.8,57.2,13.3,57.2,27.4S45.7,53,31.6,53z M31.6,3.3 C18.4,3.3,7.5,14.1,7.5,27.4c0,13.3,10.8,24.1,24.1,24.1C44.9,51.5,55.7,40.7,55.7,27.4C55.7,14.1,44.9,3.3,31.6,3.3z M24.9,21.3 c0-2.2,1.6-3.1,3.5-2l10.5,6.1c1.899,1.1,1.899,2.9,0,4l-10.5,6.1c-1.9,1.1-3.5,0.2-3.5-2V21.3z",stopIcon:"path://M30.9,53.2C16.8,53.2,5.3,41.7,5.3,27.6S16.8,2,30.9,2C45,2,56.4,13.5,56.4,27.6S45,53.2,30.9,53.2z M30.9,3.5C17.6,3.5,6.8,14.4,6.8,27.6c0,13.3,10.8,24.1,24.101,24.1C44.2,51.7,55,40.9,55,27.6C54.9,14.4,44.1,3.5,30.9,3.5z M36.9,35.8c0,0.601-0.4,1-0.9,1h-1.3c-0.5,0-0.9-0.399-0.9-1V19.5c0-0.6,0.4-1,0.9-1H36c0.5,0,0.9,0.4,0.9,1V35.8z M27.8,35.8 c0,0.601-0.4,1-0.9,1h-1.3c-0.5,0-0.9-0.399-0.9-1V19.5c0-0.6,0.4-1,0.9-1H27c0.5,0,0.9,0.4,0.9,1L27.8,35.8L27.8,35.8z",nextIcon:"M2,18.5A1.52,1.52,0,0,1,.92,18a1.49,1.49,0,0,1,0-2.12L7.81,9.36,1,3.11A1.5,1.5,0,1,1,3,.89l8,7.34a1.48,1.48,0,0,1,.49,1.09,1.51,1.51,0,0,1-.46,1.1L3,18.08A1.5,1.5,0,0,1,2,18.5Z",prevIcon:"M10,.5A1.52,1.52,0,0,1,11.08,1a1.49,1.49,0,0,1,0,2.12L4.19,9.64,11,15.89a1.5,1.5,0,1,1-2,2.22L1,10.77A1.48,1.48,0,0,1,.5,9.68,1.51,1.51,0,0,1,1,8.58L9,.92A1.5,1.5,0,0,1,10,.5Z",prevBtnSize:18,nextBtnSize:18,color:"#A4B1D7",borderColor:"#A4B1D7",borderWidth:1},emphasis:{label:{show:!0,color:"#6f778d"},itemStyle:{color:"#316BF3"},controlStyle:{color:"#316BF3",borderColor:"#316BF3",borderWidth:2}},progress:{lineStyle:{color:"#316BF3"},itemStyle:{color:"#316BF3"},label:{color:"#6f778d"}},data:[]}),e}(no);ia(hn,Uo.prototype);const ll=hn;var ul=function(a){k(e,a);function e(){var t=a!==null&&a.apply(this,arguments)||this;return t.type=e.type,t}return e.type="timeline",e}(rt);const cl=ul;var dl=function(a){k(e,a);function e(t,o,n,i){var r=a.call(this,t,o,n)||this;return r.type=i||"value",r}return e.prototype.getLabelModel=function(){return this.model.getModel("label")},e.prototype.isHorizontal=function(){return this.model.get("orient")==="horizontal"},e}(Yi);const pl=dl;var Tt=Math.PI,io=Ue(),hl=function(a){k(e,a);function e(){var t=a!==null&&a.apply(this,arguments)||this;return t.type=e.type,t}return e.prototype.init=function(t,o){this.api=o},e.prototype.render=function(t,o,n){if(this.model=t,this.api=n,this.ecModel=o,this.group.removeAll(),t.get("show",!0)){var i=this._layout(t,n),r=this._createGroup("_mainGroup"),s=this._createGroup("_labelGroup"),l=this._axis=this._createAxis(i,t);t.formatTooltip=function(u){var c=l.scale.getLabel({value:u});return $t("nameValue",{noName:!0,value:c})},P(["AxisLine","AxisTick","Control","CurrentPointer"],function(u){this["_render"+u](i,r,l,t)},this),this._renderAxisLabel(i,s,l,t),this._position(i,t)}this._doPlayStop(),this._updateTicksStatus()},e.prototype.remove=function(){this._clearTimer(),this.group.removeAll()},e.prototype.dispose=function(){this._clearTimer()},e.prototype._layout=function(t,o){var n=t.get(["label","position"]),i=t.get("orient"),r=vl(t,o),s;n==null||n==="auto"?s=i==="horizontal"?r.y+r.height/2<o.getHeight()/2?"-":"+":r.x+r.width/2<o.getWidth()/2?"+":"-":he(n)?s={horizontal:{top:"-",bottom:"+"},vertical:{left:"-",right:"+"}}[i][n]:s=n;var l={horizontal:"center",vertical:s>=0||s==="+"?"left":"right"},u={horizontal:s>=0||s==="+"?"top":"bottom",vertical:"middle"},c={horizontal:0,vertical:Tt/2},d=i==="vertical"?r.height:r.width,p=t.getModel("controlStyle"),m=p.get("show",!0),v=m?p.get("itemSize"):0,h=m?p.get("itemGap"):0,g=v+h,y=t.get(["label","rotate"])||0;y=y*Tt/180;var _,b,f,S=p.get("position",!0),x=m&&p.get("showPlayBtn",!0),w=m&&p.get("showPrevBtn",!0),D=m&&p.get("showNextBtn",!0),L=0,C=d;S==="left"||S==="bottom"?(x&&(_=[0,0],L+=g),w&&(b=[L,0],L+=g),D&&(f=[C-v,0],C-=g)):(x&&(_=[C-v,0],C-=g),w&&(b=[0,0],L+=g),D&&(f=[C-v,0],C-=g));var A=[L,C];return t.get("inverse")&&A.reverse(),{viewRect:r,mainLength:d,orient:i,rotation:c[i],labelRotation:y,labelPosOpt:s,labelAlign:t.get(["label","align"])||l[i],labelBaseline:t.get(["label","verticalAlign"])||t.get(["label","baseline"])||u[i],playPosition:_,prevBtnPosition:b,nextBtnPosition:f,axisExtent:A,controlSize:v,controlGap:h}},e.prototype._position=function(t,o){var n=this._mainGroup,i=this._labelGroup,r=t.viewRect;if(t.orient==="vertical"){var s=xi(),l=r.x,u=r.y+r.height;Ia(s,s,[-l,-u]),vi(s,s,-Tt/2),Ia(s,s,[l,u]),r=r.clone(),r.applyTransform(s)}var c=_(r),d=_(n.getBoundingRect()),p=_(i.getBoundingRect()),m=[n.x,n.y],v=[i.x,i.y];v[0]=m[0]=c[0][0];var h=t.labelPosOpt;if(h==null||he(h)){var g=h==="+"?0:1;b(m,d,c,1,g),b(v,p,c,1,1-g)}else{var g=h>=0?0:1;b(m,d,c,1,g),v[1]=m[1]+h}n.setPosition(m),i.setPosition(v),n.rotation=i.rotation=t.rotation,y(n),y(i);function y(f){f.originX=c[0][0]-f.x,f.originY=c[1][0]-f.y}function _(f){return[[f.x,f.x+f.width],[f.y,f.y+f.height]]}function b(f,S,x,w,D){f[w]+=x[w][D]-S[w][D]}},e.prototype._createAxis=function(t,o){var n=o.getData(),i=o.get("axisType"),r=fl(o,i);r.getTicks=function(){return n.mapArray(["value"],function(u){return{value:u}})};var s=n.getDataExtent("value");r.setExtent(s[0],s[1]),r.calcNiceTicks();var l=new pl("value",r,t.axisExtent,i);return l.model=o,l},e.prototype._createGroup=function(t){var o=this[t]=new be;return this.group.add(o),o},e.prototype._renderAxisLine=function(t,o,n,i){var r=n.getExtent();if(i.get(["lineStyle","show"])){var s=new Nt({shape:{x1:r[0],y1:0,x2:r[1],y2:0},style:ue({lineCap:"round"},i.getModel("lineStyle").getLineStyle()),silent:!0,z2:1});o.add(s);var l=this._progressLine=new Nt({shape:{x1:r[0],x2:this._currentPointer?this._currentPointer.x:r[0],y1:0,y2:0},style:Ie({lineCap:"round",lineWidth:s.style.lineWidth},i.getModel(["progress","lineStyle"]).getLineStyle()),silent:!0,z2:1});o.add(l)}},e.prototype._renderAxisTick=function(t,o,n,i){var r=this,s=i.getData(),l=n.scale.getTicks();this._tickSymbols=[],P(l,function(u){var c=n.dataToCoord(u.value),d=s.getItemModel(u.value),p=d.getModel("itemStyle"),m=d.getModel(["emphasis","itemStyle"]),v=d.getModel(["progress","itemStyle"]),h={x:c,y:0,onclick:re(r._changeTimeline,r,u.value)},g=ro(d,p,o,h);g.ensureState("emphasis").style=m.getItemStyle(),g.ensureState("progress").style=v.getItemStyle(),vt(g);var y=Je(g);d.get("tooltip")?(y.dataIndex=u.value,y.dataModel=i):y.dataIndex=y.dataModel=null,r._tickSymbols.push(g)})},e.prototype._renderAxisLabel=function(t,o,n,i){var r=this,s=n.getLabelModel();if(s.get("show")){var l=i.getData(),u=n.getViewLabels();this._tickLabels=[],P(u,function(c){var d=c.tickValue,p=l.getItemModel(d),m=p.getModel("label"),v=p.getModel(["emphasis","label"]),h=p.getModel(["progress","label"]),g=n.dataToCoord(c.tickValue),y=new Ae({x:g,y:0,rotation:t.labelRotation-t.rotation,onclick:re(r._changeTimeline,r,d),silent:!1,style:Pe(m,{text:c.formattedLabel,align:t.labelAlign,verticalAlign:t.labelBaseline})});y.ensureState("emphasis").style=Pe(v),y.ensureState("progress").style=Pe(h),o.add(y),vt(y),io(y).dataIndex=d,r._tickLabels.push(y)})}},e.prototype._renderControl=function(t,o,n,i){var r=t.controlSize,s=t.rotation,l=i.getModel("controlStyle").getItemStyle(),u=i.getModel(["emphasis","controlStyle"]).getItemStyle(),c=i.getPlayState(),d=i.get("inverse",!0);p(t.nextBtnPosition,"next",re(this._changeTimeline,this,d?"-":"+")),p(t.prevBtnPosition,"prev",re(this._changeTimeline,this,d?"+":"-")),p(t.playPosition,c?"stop":"play",re(this._handlePlayClick,this,!c),!0);function p(m,v,h,g){if(m){var y=gi(ge(i.get(["controlStyle",v+"BtnSize"]),r),r),_=[0,-y/2,y,y],b=gl(i,v+"Icon",_,{x:m[0],y:m[1],originX:r/2,originY:0,rotation:g?-s:0,rectHover:!0,style:l,onclick:h});b.ensureState("emphasis").style=u,o.add(b),vt(b)}}},e.prototype._renderCurrentPointer=function(t,o,n,i){var r=i.getData(),s=i.getCurrentIndex(),l=r.getItemModel(s).getModel("checkpointStyle"),u=this,c={onCreate:function(d){d.draggable=!0,d.drift=re(u._handlePointerDrag,u),d.ondragend=re(u._handlePointerDragend,u),so(d,u._progressLine,s,n,i,!0)},onUpdate:function(d){so(d,u._progressLine,s,n,i)}};this._currentPointer=ro(l,l,this._mainGroup,{},this._currentPointer,c)},e.prototype._handlePlayClick=function(t){this._clearTimer(),this.api.dispatchAction({type:"timelinePlayChange",playState:t,from:this.uid})},e.prototype._handlePointerDrag=function(t,o,n){this._clearTimer(),this._pointerChangeTimeline([n.offsetX,n.offsetY])},e.prototype._handlePointerDragend=function(t){this._pointerChangeTimeline([t.offsetX,t.offsetY],!0)},e.prototype._pointerChangeTimeline=function(t,o){var n=this._toAxisCoord(t)[0],i=this._axis,r=mi(i.getExtent().slice());n>r[1]&&(n=r[1]),n<r[0]&&(n=r[0]),this._currentPointer.x=n,this._currentPointer.markRedraw();var s=this._progressLine;s&&(s.shape.x2=n,s.dirty());var l=this._findNearestTick(n),u=this.model;(o||l!==u.getCurrentIndex()&&u.get("realtime"))&&this._changeTimeline(l)},e.prototype._doPlayStop=function(){var t=this;this._clearTimer(),this.model.getPlayState()&&(this._timer=setTimeout(function(){var o=t.model;t._changeTimeline(o.getCurrentIndex()+(o.get("rewind",!0)?-1:1))},this.model.get("playInterval")))},e.prototype._toAxisCoord=function(t){var o=this._mainGroup.getLocalTransform();return yi(t,o,!0)},e.prototype._findNearestTick=function(t){var o=this.model.getData(),n=1/0,i,r=this._axis;return o.each(["value"],function(s,l){var u=r.dataToCoord(s),c=Math.abs(u-t);c<n&&(n=c,i=l)}),i},e.prototype._clearTimer=function(){this._timer&&(clearTimeout(this._timer),this._timer=null)},e.prototype._changeTimeline=function(t){var o=this.model.getCurrentIndex();t==="+"?t=o+1:t==="-"&&(t=o-1),this.api.dispatchAction({type:"timelineChange",currentIndex:t,from:this.uid})},e.prototype._updateTicksStatus=function(){var t=this.model.getCurrentIndex(),o=this._tickSymbols,n=this._tickLabels;if(o)for(var i=0;i<o.length;i++)o&&o[i]&&o[i].toggleState("progress",i<t);if(n)for(var i=0;i<n.length;i++)n&&n[i]&&n[i].toggleState("progress",io(n[i]).dataIndex<=t)},e.type="timeline.slider",e}(cl);function fl(a,e){if(e=e||a.get("type"),e)switch(e){case"category":return new Si({ordinalMeta:a.getCategories(),extent:[1/0,-1/0]});case"time":return new bi({locale:a.ecModel.getLocaleModel(),useUTC:a.ecModel.get("useUTC")});default:return new _i}}function vl(a,e){return zo(a.getBoxLayoutParams(),{width:e.getWidth(),height:e.getHeight()},a.get("padding"))}function gl(a,e,t,o){var n=o.style,i=Ro(a.get(["controlStyle",e]),o||{},new ea(t[0],t[1],t[2],t[3]));return n&&i.setStyle(n),i}function ro(a,e,t,o,n,i){var r=e.get("color");if(n)n.setColor(r),t.add(n),i&&i.onUpdate(n);else{var s=a.get("symbol");n=ta(s,-1,-1,2,2,r),n.setStyle("strokeNoScale",!0),t.add(n),i&&i.onCreate(n)}var l=e.getItemStyle(["color"]);n.setStyle(l),o=se({rectHover:!0,z2:100},o,!0);var u=oa(a.get("symbolSize"));o.scaleX=u[0]/2,o.scaleY=u[1]/2;var c=na(a.get("symbolOffset"),u);c&&(o.x=(o.x||0)+c[0],o.y=(o.y||0)+c[1]);var d=a.get("symbolRotate");return o.rotation=(d||0)*Math.PI/180||0,n.attr(o),n.updateTransform(),n}function so(a,e,t,o,n,i){if(!a.dragging){var r=n.getModel("checkpointStyle"),s=o.dataToCoord(n.getData().get("value",t));if(i||!r.get("animation",!0))a.attr({x:s,y:0}),e&&e.attr({shape:{x2:s}});else{var l={duration:r.get("animationDuration",!0),easing:r.get("animationEasing",!0)};a.stopAnimation(null,!0),a.animateTo({x:s,y:0},l),e&&e.animateTo({shape:{x2:s}},l)}}}const ml=hl;function yl(a){a.registerAction({type:"timelineChange",event:"timelineChanged",update:"prepareAndUpdate"},function(e,t,o){var n=t.getComponent("timeline");return n&&e.currentIndex!=null&&(n.setCurrentIndex(e.currentIndex),!n.get("loop",!0)&&n.isIndexMax()&&n.getPlayState()&&(n.setPlayState(!1),o.dispatchAction({type:"timelinePlayChange",playState:!1,from:e.from}))),t.resetOption("timeline",{replaceMerge:n.get("replaceMerge",!0)}),Ie({currentIndex:n.option.currentIndex},e)}),a.registerAction({type:"timelinePlayChange",event:"timelinePlayChanged",update:"update"},function(e,t){var o=t.getComponent("timeline");o&&e.playState!=null&&o.setPlayState(e.playState)})}function _l(a){var e=a&&a.timeline;F(e)||(e=e?[e]:[]),P(e,function(t){t&&bl(t)})}function bl(a){var e=a.type,t={number:"value",time:"time"};if(t[e]&&(a.axisType=t[e],delete a.type),lo(a),ve(a,"controlPosition")){var o=a.controlStyle||(a.controlStyle={});ve(o,"position")||(o.position=a.controlPosition),o.position==="none"&&!ve(o,"show")&&(o.show=!1,delete o.position),delete a.controlPosition}P(a.data||[],function(n){Fe(n)&&!F(n)&&(!ve(n,"value")&&ve(n,"name")&&(n.value=n.name),lo(n))})}function lo(a){var e=a.itemStyle||(a.itemStyle={}),t=e.emphasis||(e.emphasis={}),o=a.label||a.label||{},n=o.normal||(o.normal={}),i={normal:1,emphasis:1};P(o,function(r,s){!i[s]&&!ve(n,s)&&(n[s]=r)}),t.label&&!ve(o,"emphasis")&&(o.emphasis=t.label,delete t.label)}function ve(a,e){return a.hasOwnProperty(e)}function Sl(a){a.registerComponentModel(ll),a.registerComponentView(ml),a.registerSubTypeDefaulter("timeline",function(){return"slider"}),yl(a),a.registerPreprocessor(_l)}function xl(a,e){if(!a)return!1;for(var t=F(a)?a:[a],o=0;o<t.length;o++)if(t[o]&&t[o][e])return!0;return!1}function He(a){Ci(a,"label",["show"])}var je=Ue(),fn=function(a){k(e,a);function e(){var t=a!==null&&a.apply(this,arguments)||this;return t.type=e.type,t.createdBySelf=!1,t}return e.prototype.init=function(t,o,n){this.mergeDefaultAndTheme(t,n),this._mergeOption(t,n,!1,!0)},e.prototype.isAnimationEnabled=function(){if($o.node)return!1;var t=this.__hostSeries;return this.getShallow("animation")&&t&&t.isAnimationEnabled()},e.prototype.mergeOption=function(t,o){this._mergeOption(t,o,!1,!1)},e.prototype._mergeOption=function(t,o,n,i){var r=this.mainType;n||o.eachSeries(function(s){var l=s.get(this.mainType,!0),u=je(s)[r];if(!l||!l.data){je(s)[r]=null;return}u?u._mergeOption(l,o,!0):(i&&He(l),P(l.data,function(c){c instanceof Array?(He(c[0]),He(c[1])):He(c)}),u=this.createMarkerModelFromSeries(l,this,o),ue(u,{mainType:this.mainType,seriesIndex:s.seriesIndex,name:s.name,createdBySelf:!0}),u.__hostSeries=s),je(s)[r]=u},this)},e.prototype.formatTooltip=function(t,o,n){var i=this.getData(),r=this.getRawValue(t),s=i.getName(t);return $t("section",{header:this.name,blocks:[$t("nameValue",{name:s,value:r,noName:!s,noValue:r==null})]})},e.prototype.getData=function(){return this._data},e.prototype.setData=function(t){this._data=t},e.getMarkerModelFromSeries=function(t,o){return je(t)[o]},e.type="marker",e.dependencies=["series","grid","polar","geo"],e}(it);ia(fn,Uo.prototype);const et=fn;function Cl(a){return!(isNaN(parseFloat(a.x))&&isNaN(parseFloat(a.y)))}function wl(a){return!isNaN(parseFloat(a.x))&&!isNaN(parseFloat(a.y))}function Ke(a,e,t,o,n,i){var r=[],s=wi(e,o),l=s?e.getCalculationInfo("stackResultDimension"):o,u=va(e,l,a),c=e.indicesOfNearest(l,u)[0];r[n]=e.get(t,c),r[i]=e.get(l,c);var d=e.get(o,c),p=Ai(e.get(o,c));return p=Math.min(p,20),p>=0&&(r[i]=+r[i].toFixed(p)),[r,d]}var Dt={min:Z(Ke,"min"),max:Z(Ke,"max"),average:Z(Ke,"average"),median:Z(Ke,"median")};function uo(a,e){if(e){var t=a.getData(),o=a.coordinateSystem,n=o&&o.dimensions;if(!wl(e)&&!F(e.coord)&&F(n)){var i=vn(e,t,o,a);if(e=le(e),e.type&&Dt[e.type]&&i.baseAxis&&i.valueAxis){var r=me(n,i.baseAxis.dim),s=me(n,i.valueAxis.dim),l=Dt[e.type](t,i.baseDataDim,i.valueDataDim,r,s);e.coord=l[0],e.value=l[1]}else e.coord=[e.xAxis!=null?e.xAxis:e.radiusAxis,e.yAxis!=null?e.yAxis:e.angleAxis]}if(e.coord==null||!F(n))e.coord=[];else for(var u=e.coord,c=0;c<2;c++)Dt[u[c]]&&(u[c]=va(t,t.mapDimension(n[c]),u[c]));return e}}function vn(a,e,t,o){var n={};return a.valueIndex!=null||a.valueDim!=null?(n.valueDataDim=a.valueIndex!=null?e.getDimension(a.valueIndex):a.valueDim,n.valueAxis=t.getAxis(Al(o,n.valueDataDim)),n.baseAxis=t.getOtherAxis(n.valueAxis),n.baseDataDim=e.mapDimension(n.baseAxis.dim)):(n.baseAxis=o.getBaseAxis(),n.valueAxis=t.getOtherAxis(n.baseAxis),n.baseDataDim=e.mapDimension(n.baseAxis.dim),n.valueDataDim=e.mapDimension(n.valueAxis.dim)),n}function Al(a,e){var t=a.getData().getDimensionInfo(e);return t&&t.coordDim}function co(a,e){return a&&a.containData&&e.coord&&!Cl(e)?a.containData(e.coord):!0}function Pl(a,e){return a?function(t,o,n,i){var r=i<2?t.coord&&t.coord[i]:t.value;return Oa(r,e[i])}:function(t,o,n,i){return Oa(t.value,e[i])}}function va(a,e,t){if(t==="average"){var o=0,n=0;return a.each(e,function(i,r){isNaN(i)||(o+=i,n++)}),o/n}else return t==="median"?a.getMedian(e):a.getDataExtent(e)[t==="max"?1:0]}var Lt=Ue(),Tl=function(a){k(e,a);function e(){var t=a!==null&&a.apply(this,arguments)||this;return t.type=e.type,t}return e.prototype.init=function(){this.markerGroupMap=Go()},e.prototype.render=function(t,o,n){var i=this,r=this.markerGroupMap;r.each(function(s){Lt(s).keep=!1}),o.eachSeries(function(s){var l=et.getMarkerModelFromSeries(s,i.type);l&&i.renderSeries(s,l,o,n)}),r.each(function(s){!Lt(s).keep&&i.group.remove(s.group)})},e.prototype.markKeep=function(t){Lt(t).keep=!0},e.prototype.toggleBlurSeries=function(t,o){var n=this;P(t,function(i){var r=et.getMarkerModelFromSeries(i,n.type);if(r){var s=r.getData();s.eachItemGraphicEl(function(l){l&&(o?Pi(l):Ti(l))})}})},e.type="marker",e}(rt);const Dl=Tl;var Ll=function(a){k(e,a);function e(){var t=a!==null&&a.apply(this,arguments)||this;return t.type=e.type,t}return e.prototype.createMarkerModelFromSeries=function(t,o,n){return new e(t,o,n)},e.type="markLine",e.defaultOption={z:5,symbol:["circle","arrow"],symbolSize:[8,16],symbolOffset:0,precision:2,tooltip:{trigger:"item"},label:{show:!0,position:"end",distance:5},lineStyle:{type:"dashed"},emphasis:{label:{show:!0},lineStyle:{width:3}},animationEasing:"linear"},e}(et);const Il=Ll;var Ye=Ue(),Ol=function(a,e,t,o){var n=a.getData(),i;if(F(o))i=o;else{var r=o.type;if(r==="min"||r==="max"||r==="average"||r==="median"||o.xAxis!=null||o.yAxis!=null){var s=void 0,l=void 0;if(o.yAxis!=null||o.xAxis!=null)s=e.getAxis(o.yAxis!=null?"y":"x"),l=Li(o.yAxis,o.xAxis);else{var u=vn(o,n,e,a);s=u.valueAxis;var c=Ii(n,u.valueDataDim);l=va(n,c,r)}var d=s.dim==="x"?0:1,p=1-d,m=le(o),v={coord:[]};m.type=null,m.coord=[],m.coord[p]=-1/0,v.coord[p]=1/0;var h=t.get("precision");h>=0&&Oi(l)&&(l=+l.toFixed(Math.min(h,20))),m.coord[d]=v.coord[d]=l,i=[m,v,{type:r,valueIndex:o.valueIndex,value:l}]}else i=[]}var g=[uo(a,i[0]),uo(a,i[1]),ue({},i[2])];return g[2].type=g[2].type||null,se(g[2],g[0]),se(g[2],g[1]),g};function tt(a){return!isNaN(a)&&!isFinite(a)}function po(a,e,t,o){var n=1-a,i=o.dimensions[a];return tt(e[n])&&tt(t[n])&&e[a]===t[a]&&o.getAxis(i).containData(e[a])}function kl(a,e){if(a.type==="cartesian2d"){var t=e[0].coord,o=e[1].coord;if(t&&o&&(po(1,t,o,a)||po(0,t,o,a)))return!0}return co(a,e[0])&&co(a,e[1])}function It(a,e,t,o,n){var i=o.coordinateSystem,r=a.getItemModel(e),s,l=we(r.get("x"),n.getWidth()),u=we(r.get("y"),n.getHeight());if(!isNaN(l)&&!isNaN(u))s=[l,u];else{if(o.getMarkerPosition)s=o.getMarkerPosition(a.getValues(a.dimensions,e));else{var c=i.dimensions,d=a.get(c[0],e),p=a.get(c[1],e);s=i.dataToPoint([d,p])}if(qi(i,"cartesian2d")){var m=i.getAxis("x"),v=i.getAxis("y"),c=i.dimensions;tt(a.get(c[0],e))?s[0]=m.toGlobalCoord(m.getExtent()[t?0:1]):tt(a.get(c[1],e))&&(s[1]=v.toGlobalCoord(v.getExtent()[t?0:1]))}isNaN(l)||(s[0]=l),isNaN(u)||(s[1]=u)}a.setItemLayout(e,s)}var Ml=function(a){k(e,a);function e(){var t=a!==null&&a.apply(this,arguments)||this;return t.type=e.type,t}return e.prototype.updateTransform=function(t,o,n){o.eachSeries(function(i){var r=et.getMarkerModelFromSeries(i,"markLine");if(r){var s=r.getData(),l=Ye(r).from,u=Ye(r).to;l.each(function(c){It(l,c,!0,i,n),It(u,c,!1,i,n)}),s.each(function(c){s.setItemLayout(c,[l.getItemLayout(c),u.getItemLayout(c)])}),this.markerGroupMap.get(i.id).updateLayout()}},this)},e.prototype.renderSeries=function(t,o,n,i){var r=t.coordinateSystem,s=t.id,l=t.getData(),u=this.markerGroupMap,c=u.get(s)||u.set(s,new Cr);this.group.add(c.group);var d=Bl(r,t,o),p=d.from,m=d.to,v=d.line;Ye(o).from=p,Ye(o).to=m,o.setData(v);var h=o.get("symbol"),g=o.get("symbolSize"),y=o.get("symbolRotate"),_=o.get("symbolOffset");F(h)||(h=[h,h]),F(g)||(g=[g,g]),F(y)||(y=[y,y]),F(_)||(_=[_,_]),d.from.each(function(f){b(p,f,!0),b(m,f,!1)}),v.each(function(f){var S=v.getItemModel(f).getModel("lineStyle").getLineStyle();v.setItemLayout(f,[p.getItemLayout(f),m.getItemLayout(f)]),S.stroke==null&&(S.stroke=p.getItemVisual(f,"style").fill),v.setItemVisual(f,{fromSymbolKeepAspect:p.getItemVisual(f,"symbolKeepAspect"),fromSymbolOffset:p.getItemVisual(f,"symbolOffset"),fromSymbolRotate:p.getItemVisual(f,"symbolRotate"),fromSymbolSize:p.getItemVisual(f,"symbolSize"),fromSymbol:p.getItemVisual(f,"symbol"),toSymbolKeepAspect:m.getItemVisual(f,"symbolKeepAspect"),toSymbolOffset:m.getItemVisual(f,"symbolOffset"),toSymbolRotate:m.getItemVisual(f,"symbolRotate"),toSymbolSize:m.getItemVisual(f,"symbolSize"),toSymbol:m.getItemVisual(f,"symbol"),style:S})}),c.updateData(v),d.line.eachItemGraphicEl(function(f){Je(f).dataModel=o,f.traverse(function(S){Je(S).dataModel=o})});function b(f,S,x){var w=f.getItemModel(S);It(f,S,x,t,i);var D=w.getModel("itemStyle").getItemStyle();D.fill==null&&(D.fill=Di(l,"color")),f.setItemVisual(S,{symbolKeepAspect:w.get("symbolKeepAspect"),symbolOffset:ge(w.get("symbolOffset",!0),_[x?0:1]),symbolRotate:ge(w.get("symbolRotate",!0),y[x?0:1]),symbolSize:ge(w.get("symbolSize"),g[x?0:1]),symbol:ge(w.get("symbol",!0),h[x?0:1]),style:D})}this.markKeep(c),c.group.silent=o.get("silent")||t.get("silent")},e.type="markLine",e}(Dl);function Bl(a,e,t){var o;a?o=U(a&&a.dimensions,function(u){var c=e.getData().getDimensionInfo(e.getData().mapDimension(u))||{};return ue(ue({},c),{name:u,ordinalMeta:null})}):o=[{name:"value",type:"float"}];var n=new Xe(o,t),i=new Xe(o,t),r=new Xe([],t),s=U(t.get("data"),Z(Ol,e,a,t));a&&(s=Fo(s,Z(kl,a)));var l=Pl(!!a,o);return n.initData(U(s,function(u){return u[0]}),null,l),i.initData(U(s,function(u){return u[1]}),null,l),r.initData(U(s,function(u){return u[2]})),r.hasItemOption=!0,{from:n,to:i,line:r}}const Vl=Ml;function Nl(a){a.registerComponentModel(Il),a.registerComponentView(Vl),a.registerPreprocessor(function(e){xl(e.series,"markLine")&&(e.markLine=e.markLine||{})})}const El={viewBox:"0 0 24 24",width:"1.2em",height:"1.2em"},zl=M("path",{fill:"currentColor",d:"M12 15.5A3.5 3.5 0 0 1 8.5 12A3.5 3.5 0 0 1 12 8.5a3.5 3.5 0 0 1 3.5 3.5a3.5 3.5 0 0 1-3.5 3.5m7.43-2.53c.04-.32.07-.64.07-.97c0-.33-.03-.66-.07-1l2.11-1.63c.19-.15.24-.42.12-.64l-2-3.46c-.12-.22-.39-.31-.61-.22l-2.49 1c-.52-.39-1.06-.73-1.69-.98l-.37-2.65A.506.506 0 0 0 14 2h-4c-.25 0-.46.18-.5.42l-.37 2.65c-.63.25-1.17.59-1.69.98l-2.49-1c-.22-.09-.49 0-.61.22l-2 3.46c-.13.22-.07.49.12.64L4.57 11c-.04.34-.07.67-.07 1c0 .33.03.65.07.97l-2.11 1.66c-.19.15-.25.42-.12.64l2 3.46c.12.22.39.3.61.22l2.49-1.01c.52.4 1.06.74 1.69.99l.37 2.65c.04.24.25.42.5.42h4c.25 0 .46-.18.5-.42l.37-2.65c.63-.26 1.17-.59 1.69-.99l2.49 1.01c.22.08.49 0 .61-.22l2-3.46c.12-.22.07-.49-.12-.64l-2.11-1.66Z"},null,-1),Rl=[zl];function $l(a,e){return O(),V("svg",El,Rl)}const Fl={name:"mdi-cog",render:$l};function $e(){return`#${(Math.random()*16777215<<0).toString(16)}`}function qt(a,e,t,o,n=0){return{name:t,type:o.type||"line",xAxisIndex:n,yAxisIndex:n,itemStyle:{color:o.color||$e()},encode:{x:a,y:e},showSymbol:!1}}function ho(a,e,t,o,n=0){const i={type:pe.line},r=qt(a,e,t,i,n),s={stack:t,stackStrategy:"all",lineStyle:{opacity:0},showSymbol:!1,areaStyle:{color:o.color,opacity:.1},tooltip:{show:!1}};return Object.assign(r,s),r}function Wl(a,e){const t=a.indexOf("open"),o=a.indexOf("close"),n=a.indexOf("high"),i=a.indexOf("low");let r;return e.map((s,l)=>{const u=s.slice(),c=l===0?(u[t]+u[o])/2:(r[t]+r[o])/2,d=(u[t]+u[n]+u[i]+u[o])/4,p=Math.max(u[n],u[t],u[o]),m=Math.min(u[i],u[t],u[o]);return u[t]=c,u[o]=d,u[n]=p,u[i]=m,r=u.slice(),u})}const Gl=2,Ul=3;function Se(a,e,t=Ul){const o=e%a;return e-o+(t===Gl?a:0)}function gn(a,e){return`${e.ft_order_side==="buy"?"+":"-"}${Sn("cost"in e?e.cost:e.amount*e.safe_price,a.quote_currency??"<stake_currency>")}`}function fo(a,e,t){return`${a.is_short?"Short":"Long"} ${t}  ${xo(a.profit_ratio)}
  ${gn(a,e)}
  Enter-tag: ${a.enter_tag??""}
  Exit-Tag: ${a.exit_reason??""}`}function Zl(a,e){return`${a.is_short?"Short":"Long"} adjustment
  ${gn(a,e)}
  Enter-tag: ${a.enter_tag??""}`}const Hl="path://m 52.444161,104.1909 8.386653,25.34314 8.386651,25.34313 -16.731501,0.0422 -16.731501,0.0422 8.344848,-25.38539 z m 0.08656,-48.368126 8.386652,25.343139 8.386652,25.343137 -16.731501,0.0422 -16.731502,0.0422 8.344848,-25.385389 z",vo="path://m 102.20764,19.885384 h 24.1454 v 41.928829 h -24.1454 z m 12.17344,36.423813 8.38665,25.343139 8.38666,25.343134 -16.7315,0.0422 -16.731507,0.0422 8.344847,-25.385386 z",Ot="#AD00FF",kt="#0066FF";function jl(a,e){const t=[],o=a.data_stop_ts+a.timeframe_ms;for(let n=0,i=e.length;n<i;n+=1){const r=e[n];if((Se(a.timeframe_ms??0,r.open_timestamp)<=o||!r.close_timestamp||r.close_timestamp&&r.close_timestamp>=a.data_start_ts)&&r.orders)for(let s=0;s<r.orders.length;s++){const l=r.orders[s];l.order_filled_timestamp&&Se(a.timeframe_ms??0,l.order_filled_timestamp)<=o&&l.order_filled_timestamp>a.data_start_ts&&(s===0?t.push([Se(a.timeframe_ms??0,r.open_timestamp),l.safe_price,vo,l.ft_order_side=="sell"?180:0,r.is_short?Ot:kt,r.is_short?"Short":"Long",fo(r,l,"entry")]):s===r.orders.length-1&&r.close_timestamp?Se(a.timeframe_ms??0,r.close_timestamp)<=o&&r.close_timestamp>a.data_start_ts&&r.is_open===!1&&t.push([Se(a.timeframe_ms??0,r.close_timestamp),l.safe_price,vo,r.is_short?0:180,r.is_short?Ot:kt,xo(r.profit_ratio,2),fo(r,l,"exit")]):t.push([Se(a.timeframe_ms??0,l.order_filled_timestamp),l.safe_price,Hl,l.ft_order_side=="sell"?180:0,r.is_short?Ot:kt,"",Zl(r,l)]))}}return{tradeData:t}}function Kl(a,e,t,o){const{tradeData:n}=jl(t,o),i=o.filter(s=>s.is_open),r={name:a,type:"scatter",xAxisIndex:0,yAxisIndex:0,encode:{x:0,y:1,label:5,tooltip:6},label:{show:!0,fontSize:12,backgroundColor:e!=="dark"?"#fff":"#000",padding:2,color:e==="dark"?"#fff":"#000",rotate:75,offset:[10,0],align:"left"},itemStyle:{color:s=>s.data[4],opacity:.9},symbol:s=>s[2],symbolRotate:s=>s[3],symbolSize:13,data:n};if(i.length>0){const s=t.timeframe_ms*10;r.markLine={symbol:"none",itemStyle:{color:"#ff0000AA"},label:{show:!0,position:"middle"},lineStyle:{type:"solid"},data:i.map(l=>[{name:"Stoploss",yAxis:l.stop_loss_abs,xAxis:t.data_stop_ts-s>l.open_timestamp?l.open_timestamp:t.data_stop_ts-s},{yAxis:l.stop_loss_abs,xAxis:l.close_timestamp??t.data_stop_ts+t.timeframe_ms}])}}return r}function Yl(a,e,t,o){const n=a.indexOf(t),i=a.indexOf(o),r=n>0&&i>0;return r&&a.push(`${t}-${o}`),e.map(s=>{const l=s.slice();if(r){const u=l===null||l[i]===null||l[n]===null?null:l[i]-l[n];l.push(u)}return l})}function ql(a){const e=[];return"main_plot"in a&&Object.entries(a.main_plot).forEach(([t,o])=>{o.fill_to&&e.push([t,o.fill_to])}),"subplots"in a&&Object.values(a.subplots).forEach(t=>{Object.entries(t).forEach(([o,n])=>{n.fill_to&&e.push([o,n.fill_to])})}),e}const Xl={class:"d-flex flex-grow-1 chart-wrapper"},Mt="5.5%",Bt="1%",go=55,Re=8,Jl="#26A69A",Ql="#26A69A",eu="#EF5350",tu="#EF5350",au="#00ff26",ou="#00ff26",nu="#faba25",iu="#faba25",ru=Le({__name:"CandleChart",props:{trades:{required:!1,default:()=>[],type:Array},dataset:{required:!0,type:Object},heikinAshi:{required:!1,default:!1,type:Boolean},useUTC:{required:!1,default:!0,type:Boolean},plotConfig:{required:!0,type:Object},theme:{default:"dark",type:String},sliderPosition:{required:!1,type:Object,default:()=>{}}},setup(a){const e=a;aa([ki,ms,Mi,Xi,Ji,Bi,Sl,Vi,rl,Ni,Qi,er,Nl,cs,tr,ar,hr,Ei]);const t=G(),o=G({}),n=W(()=>e.dataset?e.dataset.strategy:""),i=W(()=>e.dataset?e.dataset.pair:""),r=W(()=>e.dataset?e.dataset.timeframe:""),s=W(()=>e.dataset!==null&&typeof e.dataset=="object"),l=W(()=>e.trades.filter(v=>v.pair===i.value)),u=W(()=>`${n.value} - ${i.value} - ${r.value}`),c=W(()=>ql(e.plotConfig));function d(v=!1){var K,ce,ke,Ze;if(!s.value)return;(K=o.value)!=null&&K.title&&(o.value.title[0].text=u.value);const h=e.dataset.columns.slice(),g=h.findIndex(T=>T==="__date_ts"),y=h.findIndex(T=>T==="open"),_=h.findIndex(T=>T==="high"),b=h.findIndex(T=>T==="low"),f=h.findIndex(T=>T==="close"),S=h.findIndex(T=>T==="volume"),x=h.findIndex(T=>T==="_buy_signal_close"||T==="_enter_long_signal_close"),w=h.findIndex(T=>T==="_sell_signal_close"||T==="_exit_long_signal_close"),D=h.findIndex(T=>T==="_enter_short_signal_close"),L=h.findIndex(T=>T==="_exit_short_signal_close"),C="subplots"in e.plotConfig?Object.keys(e.plotConfig.subplots).length+1:1;if(Array.isArray((ce=o.value)==null?void 0:ce.dataZoom))if(v){const T=(1-250/e.dataset.length)*100;o.value.dataZoom.forEach((E,q)=>{o.value&&o.value.dataZoom&&(o.value.dataZoom[q].start=T)})}else o.value.dataZoom.forEach((T,E)=>{o.value&&o.value.dataZoom&&(delete o.value.dataZoom[E].start,delete o.value.dataZoom[E].end)});let A=e.heikinAshi?Wl(h,e.dataset.data):e.dataset.data.slice();c.value.forEach(([T,E])=>{A=Yl(h,A,T,E)});const N=Array(A.length>0?A[A.length-2].length:0);N[g]=A[A.length-1][g]+e.dataset.timeframe_ms*3,A.push(N);const R={dataset:{source:A},grid:[{left:Mt,right:Bt,bottom:`${C*Re+2}%`},{left:Mt,right:Bt,bottom:`${C*Re}%`,height:`${Re}%`}],series:[{name:"Candles",type:"candlestick",barWidth:"80%",itemStyle:{color:Jl,color0:eu,borderColor:Ql,borderColor0:tu},encode:{x:g,y:[y,f,b,_]}},{name:"Volume",type:"bar",xAxisIndex:1,yAxisIndex:1,itemStyle:{color:"#777777"},large:!0,encode:{x:g,y:S}},{name:"Entry",type:"scatter",symbol:"triangle",symbolSize:10,xAxisIndex:0,yAxisIndex:0,itemStyle:{color:au},encode:{x:g,y:x}}]};if(w>=0&&Array.isArray(R.series)&&R.series.push({name:"Exit",type:"scatter",symbol:"diamond",symbolSize:8,xAxisIndex:0,yAxisIndex:0,itemStyle:{color:nu},encode:{x:g,y:w}}),Array.isArray(R.series)&&(D>=0&&R.series.push({name:"Entry",type:"scatter",symbol:"triangle",symbolRotate:180,symbolSize:10,xAxisIndex:0,yAxisIndex:0,itemStyle:{color:ou},tooltip:{},encode:{x:g,y:D}}),L>=0&&R.series.push({name:"Exit",type:"scatter",symbol:"pin",symbolSize:8,xAxisIndex:0,yAxisIndex:0,itemStyle:{color:iu},tooltip:{},encode:{x:g,y:L}})),Object.assign(o.value,R),"main_plot"in e.plotConfig&&Object.entries(e.plotConfig.main_plot).forEach(([T,E])=>{var X,z,Y,Me,Be,Ve,Ne;const q=h.findIndex(fe=>fe===T);if(q>0){if(!Array.isArray((X=o.value)==null?void 0:X.legend)&&((Y=(z=o.value)==null?void 0:z.legend)!=null&&Y.data)&&o.value.legend.data.push(T),Array.isArray((Me=o.value)==null?void 0:Me.series)){if((Be=o.value)==null||Be.series.push(qt(g,q,T,E)),E.fill_to){const fe=`${T}-${E.fill_to}`,ut=h.findIndex(pt=>pt===fe),ct={color:E.color,type:pe.line},dt=ho(g,ut,T,ct,0);o.value.series[o.value.series.length-1].stack=T,o.value.series.push(dt)}(Ne=o.value)==null||Ne.series.splice(((Ve=o.value)==null?void 0:Ve.series.length)-1,0)}}else console.log(`element ${T} for main plot not found in columns.`)}),"subplots"in e.plotConfig){let T=2;Object.entries(e.plotConfig.subplots).forEach(([E,q])=>{const X=T;Array.isArray(o.value.yAxis)&&o.value.yAxis.length<=T&&o.value.yAxis.push({scale:!0,gridIndex:X,name:E,nameLocation:"middle",nameGap:go,axisLabel:{show:!0},axisLine:{show:!1},axisTick:{show:!1},splitLine:{show:!1}}),Array.isArray(o.value.xAxis)&&o.value.xAxis.length<=T&&o.value.xAxis.push({type:"time",gridIndex:X,axisLine:{onZero:!1},axisTick:{show:!1},axisLabel:{show:!1},axisPointer:{label:{show:!1}},splitLine:{show:!1},splitNumber:20}),Array.isArray(o.value.dataZoom)&&o.value.dataZoom.forEach(z=>z.xAxisIndex&&Array.isArray(z.xAxisIndex)?z.xAxisIndex.push(T):null),o.value.grid&&Array.isArray(o.value.grid)&&o.value.grid.push({left:Mt,right:Bt,bottom:`${(C-T+1)*Re}%`,height:`${Re}%`}),Object.entries(q).forEach(([z,Y])=>{var Be,Ve,Ne;const Me=h.findIndex(fe=>fe===z);if(Me>0){if(!Array.isArray(o.value.legend)&&((Be=o.value.legend)!=null&&Be.data)&&o.value.legend.data.push(z),o.value.series&&Array.isArray(o.value.series)){if(o.value.series.push(qt(g,Me,z,Y,T)),Y.fill_to){const fe=`${z}-${Y.fill_to}`,ut=h.findIndex(pt=>pt===fe),ct={color:Y.color,type:pe.line},dt=ho(g,ut,z,ct,T);o.value.series[o.value.series.length-1].stack=z,o.value.series.push(dt)}(Ne=o.value)==null||Ne.series.splice(((Ve=o.value)==null?void 0:Ve.series.length)-1,0)}}else console.log(`element ${z} was not found in the columns.`)}),T+=1})}Array.isArray(o.value.grid)&&(o.value.grid[o.value.grid.length-1].bottom="50px",delete o.value.grid[o.value.grid.length-1].top);const H="Trades";!Array.isArray(o.value.legend)&&((ke=o.value.legend)!=null&&ke.data)&&o.value.legend.data.push(H);const Oe=Kl(H,e.theme,e.dataset,l.value);Array.isArray(o.value.series)&&o.value.series.push(Oe),(Ze=t.value)==null||Ze.setOption(o.value,{replaceMerge:["series","grid","yAxis","xAxis","legend"],noMerge:!v})}function p(){var v;(v=t.value)==null||v.setOption({},{noMerge:!0}),o.value={title:[{show:!1}],backgroundColor:"rgba(0, 0, 0, 0)",useUTC:e.useUTC,animation:!1,legend:{data:["Candles","Volume","Entry","Exit"],right:"1%"},tooltip:{show:!0,trigger:"axis",renderMode:"richText",backgroundColor:"rgba(80,80,80,0.7)",borderWidth:0,textStyle:{color:"#fff"},axisPointer:{type:"cross",lineStyle:{color:"#cccccc",width:1,opacity:1}},position(h,g,y,_,b){const f={top:60},S=h[0]<b.viewSize[0]/2;return f[["left","right"][+S]]=S?5:60,f}},axisPointer:{link:[{xAxisIndex:"all"}],label:{backgroundColor:"#777"}},xAxis:[{type:"time",axisLine:{onZero:!1},axisTick:{show:!0},axisLabel:{show:!0},axisPointer:{label:{show:!1}},position:"top",splitLine:{show:!1},splitNumber:20,min:"dataMin",max:"dataMax"},{type:"time",gridIndex:1,axisLine:{onZero:!1},axisTick:{show:!1},axisLabel:{show:!1},axisPointer:{label:{show:!1}},splitLine:{show:!1},splitNumber:20,min:"dataMin",max:"dataMax"}],yAxis:[{scale:!0},{scale:!0,gridIndex:1,splitNumber:2,name:"volume",nameLocation:"middle",nameGap:go,axisLabel:{show:!1},axisLine:{show:!1},axisTick:{show:!1},splitLine:{show:!1}}],dataZoom:[{type:"inside",xAxisIndex:[0,1],start:80,end:100},{xAxisIndex:[0,1],bottom:10,start:80,end:100,...or}]},console.log("Initialized"),d(!0)}function m(){if(!e.sliderPosition)return;const v=_a(e.sliderPosition.startValue-e.dataset.timeframe_ms*40,"yyyy-MM-dd HH:mm:ss"),h=_a(e.sliderPosition.endValue?e.sliderPosition.endValue+e.dataset.timeframe_ms*40:e.sliderPosition.startValue+e.dataset.timeframe_ms*80,"yyyy-MM-dd HH:mm:ss");t.value&&t.value.dispatchAction({type:"dataZoom",dataZoomIndex:0,startValue:v,endValue:h})}return at(()=>{p()}),ae(()=>e.useUTC,()=>p()),ae(()=>e.dataset,()=>d()),ae(()=>e.plotConfig,()=>p()),ae(()=>e.heikinAshi,()=>d()),ae(()=>e.sliderPosition,()=>m()),(v,h)=>(O(),V("div",Xl,[s.value?(O(),J($(zi),{key:0,ref_key:"candleChart",ref:t,theme:a.theme,autoresize:"","manual-update":""},null,8,["theme"])):j("",!0)]))}});const su=Xt(ru,[["__scopeId","data-v-4b949f98"]]);function Ce(a){return JSON.parse(JSON.stringify(a))}const mn="ftPlotConfig";function lu(){const a="ft_custom_plot_config",e="ft_selected_plot_config",t=JSON.parse(localStorage.getItem(a)||"{}");if(Object.keys(t).length>0){console.log("migrating plot configs");const o={customPlotConfigs:t,plotConfigName:localStorage.getItem(e)||"default"};localStorage.setItem(mn,JSON.stringify(o)),localStorage.removeItem(a),localStorage.removeItem(e)}}lu();const ga=xn("plotConfig",{state:()=>({customPlotConfigs:{},plotConfigName:"default",isEditing:!1,editablePlotConfig:{...gt}}),getters:{availablePlotConfigNames:a=>Object.keys(a.customPlotConfigs),plotConfig:a=>(a.isEditing?a.editablePlotConfig:a.customPlotConfigs[a.plotConfigName])||Ce(gt)},actions:{saveCustomPlotConfig(a,e){this.customPlotConfigs[a]=e},deletePlotConfig(a){delete this.customPlotConfigs[a],this.plotConfigName===a&&(this.plotConfigName=this.availablePlotConfigNames[this.availablePlotConfigNames.length-1])},renamePlotConfig(a,e){this.customPlotConfigs[e]=this.customPlotConfigs[a],delete this.customPlotConfigs[a],this.plotConfigName=e},newPlotConfig(a){this.editablePlotConfig=Ce(gt),this.saveCustomPlotConfig(a,this.editablePlotConfig),this.plotConfigName=a},plotConfigChanged(a=""){a&&(this.plotConfigName=a),console.log("plotConfigChanged",this.plotConfigName),this.isEditing&&(this.editablePlotConfig=Ce(this.customPlotConfigs[this.plotConfigName]))},duplicatePlotConfig(a,e){console.log(a,e),this.customPlotConfigs[e]=Ce(this.customPlotConfigs[a]),this.plotConfigChanged(e)}},persist:{key:mn,paths:["plotConfigName","customPlotConfigs"]}}),yn=Le({__name:"PlotConfigSelect",props:{allowEdit:{type:Boolean,default:!1},editableName:{type:String,default:"plot configuration"}},setup(a){const e=ga();return(t,o)=>{const n=Jt;return O(),J(Ho,{modelValue:$(e).plotConfigName,"onUpdate:modelValue":o[1]||(o[1]=i=>$(e).plotConfigName=i),"allow-edit":a.allowEdit,"allow-add":a.allowEdit,"allow-duplicate":a.allowEdit,"editable-name":"plot configuration",onRename:$(e).renamePlotConfig,onDelete:$(e).deletePlotConfig,onNew:$(e).newPlotConfig,onDuplicate:$(e).duplicatePlotConfig},{default:B(()=>[I(n,{modelValue:$(e).plotConfigName,"onUpdate:modelValue":o[0]||(o[0]=i=>$(e).plotConfigName=i),options:$(e).availablePlotConfigNames,size:"sm",onChange:$(e).plotConfigChanged},null,8,["modelValue","options","onChange"])]),_:1},8,["modelValue","allow-edit","allow-add","allow-duplicate","onRename","onDelete","onNew","onDuplicate"])}}}),uu={viewBox:"0 0 24 24",width:"1.2em",height:"1.2em"},cu=M("path",{fill:"currentColor",d:"M19.78 3h-8.56C10.55 3 10 3.55 10 4.22V8h6v6h3.78c.67 0 1.22-.55 1.22-1.22V4.22C21 3.55 20.45 3 19.78 3m-7.34 3.67a1.23 1.23 0 1 1 0-2.46a1.23 1.23 0 0 1 1.23 1.23c0 .68-.55 1.23-1.23 1.23m6.12 6.11a1.23 1.23 0 1 1-.02-2.46c.68-.01 1.23.54 1.24 1.24c-.01.67-.55 1.21-1.22 1.22m0-6.11a1.23 1.23 0 1 1-.02-2.46a1.231 1.231 0 0 1 .02 2.46M4.22 10h8.56A1.22 1.22 0 0 1 14 11.22v8.56c0 .67-.55 1.22-1.22 1.22H4.22C3.55 21 3 20.45 3 19.78v-8.56c0-.67.55-1.22 1.22-1.22m4.28 4.28c-.67 0-1.22.55-1.22 1.22c0 .67.55 1.22 1.22 1.22c.67 0 1.22-.55 1.22-1.22a1.22 1.22 0 0 0-1.22-1.22m-3.06-3.06c-.67 0-1.22.55-1.22 1.22a1.22 1.22 0 0 0 1.22 1.22c.67 0 1.22-.55 1.22-1.22c0-.67-.55-1.22-1.22-1.22m6.11 6.11c-.67 0-1.22.55-1.22 1.22c0 .67.55 1.22 1.22 1.22a1.22 1.22 0 0 0 1.22-1.22c0-.67-.54-1.21-1.21-1.22h-.01Z"},null,-1),du=[cu];function pu(a,e){return O(),V("svg",uu,du)}const hu={name:"mdi-dice-multiple",render:pu};var fu=Object.defineProperty,vu=Object.defineProperties,gu=Object.getOwnPropertyDescriptors,mo=Object.getOwnPropertySymbols,mu=Object.prototype.hasOwnProperty,yu=Object.prototype.propertyIsEnumerable,yo=(a,e,t)=>e in a?fu(a,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):a[e]=t,xe=(a,e)=>{for(var t in e||(e={}))mu.call(e,t)&&yo(a,t,e[t]);if(mo)for(var t of mo(e))yu.call(e,t)&&yo(a,t,e[t]);return a},_o=(a,e)=>vu(a,gu(e));const _u={props:{autoscroll:{type:Boolean,default:!0}},watch:{typeAheadPointer(){this.autoscroll&&this.maybeAdjustScroll()},open(a){this.autoscroll&&a&&this.$nextTick(()=>this.maybeAdjustScroll())}},methods:{maybeAdjustScroll(){var a;const e=((a=this.$refs.dropdownMenu)==null?void 0:a.children[this.typeAheadPointer])||!1;if(e){const t=this.getDropdownViewport(),{top:o,bottom:n,height:i}=e.getBoundingClientRect();if(o<t.top)return this.$refs.dropdownMenu.scrollTop=e.offsetTop;if(n>t.bottom)return this.$refs.dropdownMenu.scrollTop=e.offsetTop-(t.height-i)}},getDropdownViewport(){return this.$refs.dropdownMenu?this.$refs.dropdownMenu.getBoundingClientRect():{height:0,top:0,bottom:0}}}},bu={data(){return{typeAheadPointer:-1}},watch:{filteredOptions(){for(let a=0;a<this.filteredOptions.length;a++)if(this.selectable(this.filteredOptions[a])){this.typeAheadPointer=a;break}},open(a){a&&this.typeAheadToLastSelected()},selectedValue(){this.open&&this.typeAheadToLastSelected()}},methods:{typeAheadUp(){for(let a=this.typeAheadPointer-1;a>=0;a--)if(this.selectable(this.filteredOptions[a])){this.typeAheadPointer=a;break}},typeAheadDown(){for(let a=this.typeAheadPointer+1;a<this.filteredOptions.length;a++)if(this.selectable(this.filteredOptions[a])){this.typeAheadPointer=a;break}},typeAheadSelect(){const a=this.filteredOptions[this.typeAheadPointer];a&&this.selectable(a)&&this.select(a)},typeAheadToLastSelected(){this.typeAheadPointer=this.selectedValue.length!==0?this.filteredOptions.indexOf(this.selectedValue[this.selectedValue.length-1]):-1}}},Su={props:{loading:{type:Boolean,default:!1}},data(){return{mutableLoading:!1}},watch:{search(){this.$emit("search",this.search,this.toggleLoading)},loading(a){this.mutableLoading=a}},methods:{toggleLoading(a=null){return a==null?this.mutableLoading=!this.mutableLoading:this.mutableLoading=a}}},ma=(a,e)=>{const t=a.__vccOpts||a;for(const[o,n]of e)t[o]=n;return t},xu={},Cu={xmlns:"http://www.w3.org/2000/svg",width:"10",height:"10"},wu=M("path",{d:"M6.895455 5l2.842897-2.842898c.348864-.348863.348864-.914488 0-1.263636L9.106534.261648c-.348864-.348864-.914489-.348864-1.263636 0L5 3.104545 2.157102.261648c-.348863-.348864-.914488-.348864-1.263636 0L.261648.893466c-.348864.348864-.348864.914489 0 1.263636L3.104545 5 .261648 7.842898c-.348864.348863-.348864.914488 0 1.263636l.631818.631818c.348864.348864.914773.348864 1.263636 0L5 6.895455l2.842898 2.842897c.348863.348864.914772.348864 1.263636 0l.631818-.631818c.348864-.348864.348864-.914489 0-1.263636L6.895455 5z"},null,-1),Au=[wu];function Pu(a,e){return O(),V("svg",Cu,Au)}const Tu=ma(xu,[["render",Pu]]),Du={},Lu={xmlns:"http://www.w3.org/2000/svg",width:"14",height:"10"},Iu=M("path",{d:"M9.211364 7.59931l4.48338-4.867229c.407008-.441854.407008-1.158247 0-1.60046l-.73712-.80023c-.407008-.441854-1.066904-.441854-1.474243 0L7 5.198617 2.51662.33139c-.407008-.441853-1.066904-.441853-1.474243 0l-.737121.80023c-.407008.441854-.407008 1.158248 0 1.600461l4.48338 4.867228L7 10l2.211364-2.40069z"},null,-1),Ou=[Iu];function ku(a,e){return O(),V("svg",Lu,Ou)}const Mu=ma(Du,[["render",ku]]),bo={Deselect:Tu,OpenIndicator:Mu},Bu={mounted(a,{instance:e}){if(e.appendToBody){const{height:t,top:o,left:n,width:i}=e.$refs.toggle.getBoundingClientRect();let r=window.scrollX||window.pageXOffset,s=window.scrollY||window.pageYOffset;a.unbindPosition=e.calculatePosition(a,e,{width:i+"px",left:r+n+"px",top:s+o+t+"px"}),document.body.appendChild(a)}},unmounted(a,{instance:e}){e.appendToBody&&(a.unbindPosition&&typeof a.unbindPosition=="function"&&a.unbindPosition(),a.parentNode&&a.parentNode.removeChild(a))}};function Vu(a){const e={};return Object.keys(a).sort().forEach(t=>{e[t]=a[t]}),JSON.stringify(e)}let Nu=0;function Eu(){return++Nu}const zu={components:xe({},bo),directives:{appendToBody:Bu},mixins:[_u,bu,Su],compatConfig:{MODE:3},emits:["open","close","update:modelValue","search","search:compositionstart","search:compositionend","search:keydown","search:blur","search:focus","search:input","option:created","option:selecting","option:selected","option:deselecting","option:deselected"],props:{modelValue:{},components:{type:Object,default:()=>({})},options:{type:Array,default(){return[]}},disabled:{type:Boolean,default:!1},clearable:{type:Boolean,default:!0},deselectFromDropdown:{type:Boolean,default:!1},searchable:{type:Boolean,default:!0},multiple:{type:Boolean,default:!1},placeholder:{type:String,default:""},transition:{type:String,default:"vs__fade"},clearSearchOnSelect:{type:Boolean,default:!0},closeOnSelect:{type:Boolean,default:!0},label:{type:String,default:"label"},autocomplete:{type:String,default:"off"},reduce:{type:Function,default:a=>a},selectable:{type:Function,default:a=>!0},getOptionLabel:{type:Function,default(a){return typeof a=="object"?a.hasOwnProperty(this.label)?a[this.label]:console.warn(`[vue-select warn]: Label key "option.${this.label}" does not exist in options object ${JSON.stringify(a)}.
https://vue-select.org/api/props.html#getoptionlabel`):a}},getOptionKey:{type:Function,default(a){if(typeof a!="object")return a;try{return a.hasOwnProperty("id")?a.id:Vu(a)}catch(e){return console.warn(`[vue-select warn]: Could not stringify this option to generate unique key. Please provide'getOptionKey' prop to return a unique key for each option.
https://vue-select.org/api/props.html#getoptionkey`,a,e)}}},onTab:{type:Function,default:function(){this.selectOnTab&&!this.isComposing&&this.typeAheadSelect()}},taggable:{type:Boolean,default:!1},tabindex:{type:Number,default:null},pushTags:{type:Boolean,default:!1},filterable:{type:Boolean,default:!0},filterBy:{type:Function,default(a,e,t){return(e||"").toLocaleLowerCase().indexOf(t.toLocaleLowerCase())>-1}},filter:{type:Function,default(a,e){return a.filter(t=>{let o=this.getOptionLabel(t);return typeof o=="number"&&(o=o.toString()),this.filterBy(t,o,e)})}},createOption:{type:Function,default(a){return typeof this.optionList[0]=="object"?{[this.label]:a}:a}},resetOnOptionsChange:{default:!1,validator:a=>["function","boolean"].includes(typeof a)},clearSearchOnBlur:{type:Function,default:function({clearSearchOnSelect:a,multiple:e}){return a&&!e}},noDrop:{type:Boolean,default:!1},inputId:{type:String},dir:{type:String,default:"auto"},selectOnTab:{type:Boolean,default:!1},selectOnKeyCodes:{type:Array,default:()=>[13]},searchInputQuerySelector:{type:String,default:"[type=search]"},mapKeydown:{type:Function,default:(a,e)=>a},appendToBody:{type:Boolean,default:!1},calculatePosition:{type:Function,default(a,e,{width:t,top:o,left:n}){a.style.top=o,a.style.left=n,a.style.width=t}},dropdownShouldOpen:{type:Function,default({noDrop:a,open:e,mutableLoading:t}){return a?!1:e&&!t}},uid:{type:[String,Number],default:()=>Eu()}},data(){return{search:"",open:!1,isComposing:!1,pushedTags:[],_value:[],deselectButtons:[]}},computed:{isReducingValues(){return this.$props.reduce!==this.$options.props.reduce.default},isTrackingValues(){return typeof this.modelValue>"u"||this.isReducingValues},selectedValue(){let a=this.modelValue;return this.isTrackingValues&&(a=this.$data._value),a!=null&&a!==""?[].concat(a):[]},optionList(){return this.options.concat(this.pushTags?this.pushedTags:[])},searchEl(){return this.$slots.search?this.$refs.selectedOptions.querySelector(this.searchInputQuerySelector):this.$refs.search},scope(){const a={search:this.search,loading:this.loading,searching:this.searching,filteredOptions:this.filteredOptions};return{search:{attributes:xe({disabled:this.disabled,placeholder:this.searchPlaceholder,tabindex:this.tabindex,readonly:!this.searchable,id:this.inputId,"aria-autocomplete":"list","aria-labelledby":`vs${this.uid}__combobox`,"aria-controls":`vs${this.uid}__listbox`,ref:"search",type:"search",autocomplete:this.autocomplete,value:this.search},this.dropdownOpen&&this.filteredOptions[this.typeAheadPointer]?{"aria-activedescendant":`vs${this.uid}__option-${this.typeAheadPointer}`}:{}),events:{compositionstart:()=>this.isComposing=!0,compositionend:()=>this.isComposing=!1,keydown:this.onSearchKeyDown,blur:this.onSearchBlur,focus:this.onSearchFocus,input:e=>this.search=e.target.value}},spinner:{loading:this.mutableLoading},noOptions:{search:this.search,loading:this.mutableLoading,searching:this.searching},openIndicator:{attributes:{ref:"openIndicator",role:"presentation",class:"vs__open-indicator"}},listHeader:a,listFooter:a,header:_o(xe({},a),{deselect:this.deselect}),footer:_o(xe({},a),{deselect:this.deselect})}},childComponents(){return xe(xe({},bo),this.components)},stateClasses(){return{"vs--open":this.dropdownOpen,"vs--single":!this.multiple,"vs--multiple":this.multiple,"vs--searching":this.searching&&!this.noDrop,"vs--searchable":this.searchable&&!this.noDrop,"vs--unsearchable":!this.searchable,"vs--loading":this.mutableLoading,"vs--disabled":this.disabled}},searching(){return!!this.search},dropdownOpen(){return this.dropdownShouldOpen(this)},searchPlaceholder(){return this.isValueEmpty&&this.placeholder?this.placeholder:void 0},filteredOptions(){const a=[].concat(this.optionList);if(!this.filterable&&!this.taggable)return a;const e=this.search.length?this.filter(a,this.search,this):a;if(this.taggable&&this.search.length){const t=this.createOption(this.search);this.optionExists(t)||e.unshift(t)}return e},isValueEmpty(){return this.selectedValue.length===0},showClearButton(){return!this.multiple&&this.clearable&&!this.open&&!this.isValueEmpty}},watch:{options(a,e){const t=()=>typeof this.resetOnOptionsChange=="function"?this.resetOnOptionsChange(a,e,this.selectedValue):this.resetOnOptionsChange;!this.taggable&&t()&&this.clearSelection(),this.modelValue&&this.isTrackingValues&&this.setInternalValueFromOptions(this.modelValue)},modelValue:{immediate:!0,handler(a){this.isTrackingValues&&this.setInternalValueFromOptions(a)}},multiple(){this.clearSelection()},open(a){this.$emit(a?"open":"close")}},created(){this.mutableLoading=this.loading},methods:{setInternalValueFromOptions(a){Array.isArray(a)?this.$data._value=a.map(e=>this.findOptionFromReducedValue(e)):this.$data._value=this.findOptionFromReducedValue(a)},select(a){this.$emit("option:selecting",a),this.isOptionSelected(a)?this.deselectFromDropdown&&(this.clearable||this.multiple&&this.selectedValue.length>1)&&this.deselect(a):(this.taggable&&!this.optionExists(a)&&(this.$emit("option:created",a),this.pushTag(a)),this.multiple&&(a=this.selectedValue.concat(a)),this.updateValue(a),this.$emit("option:selected",a)),this.onAfterSelect(a)},deselect(a){this.$emit("option:deselecting",a),this.updateValue(this.selectedValue.filter(e=>!this.optionComparator(e,a))),this.$emit("option:deselected",a)},clearSelection(){this.updateValue(this.multiple?[]:null)},onAfterSelect(a){this.closeOnSelect&&(this.open=!this.open,this.searchEl.blur()),this.clearSearchOnSelect&&(this.search="")},updateValue(a){typeof this.modelValue>"u"&&(this.$data._value=a),a!==null&&(Array.isArray(a)?a=a.map(e=>this.reduce(e)):a=this.reduce(a)),this.$emit("update:modelValue",a)},toggleDropdown(a){const e=a.target!==this.searchEl;e&&a.preventDefault();const t=[...this.deselectButtons||[],this.$refs.clearButton];if(this.searchEl===void 0||t.filter(Boolean).some(o=>o.contains(a.target)||o===a.target)){a.preventDefault();return}this.open&&e?this.searchEl.blur():this.disabled||(this.open=!0,this.searchEl.focus())},isOptionSelected(a){return this.selectedValue.some(e=>this.optionComparator(e,a))},isOptionDeselectable(a){return this.isOptionSelected(a)&&this.deselectFromDropdown},optionComparator(a,e){return this.getOptionKey(a)===this.getOptionKey(e)},findOptionFromReducedValue(a){const e=o=>JSON.stringify(this.reduce(o))===JSON.stringify(a),t=[...this.options,...this.pushedTags].filter(e);return t.length===1?t[0]:t.find(o=>this.optionComparator(o,this.$data._value))||a},closeSearchOptions(){this.open=!1,this.$emit("search:blur")},maybeDeleteValue(){if(!this.searchEl.value.length&&this.selectedValue&&this.selectedValue.length&&this.clearable){let a=null;this.multiple&&(a=[...this.selectedValue.slice(0,this.selectedValue.length-1)]),this.updateValue(a)}},optionExists(a){return this.optionList.some(e=>this.optionComparator(e,a))},normalizeOptionForSlot(a){return typeof a=="object"?a:{[this.label]:a}},pushTag(a){this.pushedTags.push(a)},onEscape(){this.search.length?this.search="":this.searchEl.blur()},onSearchBlur(){if(this.mousedown&&!this.searching)this.mousedown=!1;else{const{clearSearchOnSelect:a,multiple:e}=this;this.clearSearchOnBlur({clearSearchOnSelect:a,multiple:e})&&(this.search=""),this.closeSearchOptions();return}if(this.search.length===0&&this.options.length===0){this.closeSearchOptions();return}},onSearchFocus(){this.open=!0,this.$emit("search:focus")},onMousedown(){this.mousedown=!0},onMouseUp(){this.mousedown=!1},onSearchKeyDown(a){const e=n=>(n.preventDefault(),!this.isComposing&&this.typeAheadSelect()),t={8:n=>this.maybeDeleteValue(),9:n=>this.onTab(),27:n=>this.onEscape(),38:n=>(n.preventDefault(),this.typeAheadUp()),40:n=>(n.preventDefault(),this.typeAheadDown())};this.selectOnKeyCodes.forEach(n=>t[n]=e);const o=this.mapKeydown(t,this);if(typeof o[a.keyCode]=="function")return o[a.keyCode](a)}}},Ru=["dir"],$u=["id","aria-expanded","aria-owns"],Fu={ref:"selectedOptions",class:"vs__selected-options"},Wu=["disabled","title","aria-label","onClick"],Gu={ref:"actions",class:"vs__actions"},Uu=["disabled"],Zu={class:"vs__spinner"},Hu=["id"],ju=["id","aria-selected","onMouseover","onClick"],Ku={key:0,class:"vs__no-options"},Yu=ne(" Sorry, no matching options. "),qu=["id"];function Xu(a,e,t,o,n,i){const r=Cn("append-to-body");return O(),V("div",{dir:t.dir,class:wa(["v-select",i.stateClasses])},[Q(a.$slots,"header",ee(oe(i.scope.header))),M("div",{id:`vs${t.uid}__combobox`,ref:"toggle",class:"vs__dropdown-toggle",role:"combobox","aria-expanded":i.dropdownOpen.toString(),"aria-owns":`vs${t.uid}__listbox`,"aria-label":"Search for option",onMousedown:e[1]||(e[1]=s=>i.toggleDropdown(s))},[M("div",Fu,[(O(!0),V(ba,null,Sa(i.selectedValue,(s,l)=>Q(a.$slots,"selected-option-container",{option:i.normalizeOptionForSlot(s),deselect:i.deselect,multiple:t.multiple,disabled:t.disabled},()=>[(O(),V("span",{key:t.getOptionKey(s),class:"vs__selected"},[Q(a.$slots,"selected-option",ee(oe(i.normalizeOptionForSlot(s))),()=>[ne(ie(t.getOptionLabel(s)),1)]),t.multiple?(O(),V("button",{key:0,ref_for:!0,ref:u=>n.deselectButtons[l]=u,disabled:t.disabled,type:"button",class:"vs__deselect",title:`Deselect ${t.getOptionLabel(s)}`,"aria-label":`Deselect ${t.getOptionLabel(s)}`,onClick:u=>i.deselect(s)},[(O(),J(ht(i.childComponents.Deselect)))],8,Wu)):j("",!0)]))])),256)),Q(a.$slots,"search",ee(oe(i.scope.search)),()=>[M("input",xa({class:"vs__search"},i.scope.search.attributes,wn(i.scope.search.events)),null,16)])],512),M("div",Gu,[qe(M("button",{ref:"clearButton",disabled:t.disabled,type:"button",class:"vs__clear",title:"Clear Selected","aria-label":"Clear Selected",onClick:e[0]||(e[0]=(...s)=>i.clearSelection&&i.clearSelection(...s))},[(O(),J(ht(i.childComponents.Deselect)))],8,Uu),[[Vt,i.showClearButton]]),Q(a.$slots,"open-indicator",ee(oe(i.scope.openIndicator)),()=>[t.noDrop?j("",!0):(O(),J(ht(i.childComponents.OpenIndicator),ee(xa({key:0},i.scope.openIndicator.attributes)),null,16))]),Q(a.$slots,"spinner",ee(oe(i.scope.spinner)),()=>[qe(M("div",Zu,"Loading...",512),[[Vt,a.mutableLoading]])])],512)],40,$u),I(Co,{name:t.transition},{default:B(()=>[i.dropdownOpen?qe((O(),V("ul",{id:`vs${t.uid}__listbox`,ref:"dropdownMenu",key:`vs${t.uid}__listbox`,class:"vs__dropdown-menu",role:"listbox",tabindex:"-1",onMousedown:e[2]||(e[2]=Ca((...s)=>i.onMousedown&&i.onMousedown(...s),["prevent"])),onMouseup:e[3]||(e[3]=(...s)=>i.onMouseUp&&i.onMouseUp(...s))},[Q(a.$slots,"list-header",ee(oe(i.scope.listHeader))),(O(!0),V(ba,null,Sa(i.filteredOptions,(s,l)=>(O(),V("li",{id:`vs${t.uid}__option-${l}`,key:t.getOptionKey(s),role:"option",class:wa(["vs__dropdown-option",{"vs__dropdown-option--deselect":i.isOptionDeselectable(s)&&l===a.typeAheadPointer,"vs__dropdown-option--selected":i.isOptionSelected(s),"vs__dropdown-option--highlight":l===a.typeAheadPointer,"vs__dropdown-option--disabled":!t.selectable(s)}]),"aria-selected":l===a.typeAheadPointer?!0:null,onMouseover:u=>t.selectable(s)?a.typeAheadPointer=l:null,onClick:Ca(u=>t.selectable(s)?i.select(s):null,["prevent","stop"])},[Q(a.$slots,"option",ee(oe(i.normalizeOptionForSlot(s))),()=>[ne(ie(t.getOptionLabel(s)),1)])],42,ju))),128)),i.filteredOptions.length===0?(O(),V("li",Ku,[Q(a.$slots,"no-options",ee(oe(i.scope.noOptions)),()=>[Yu])])):j("",!0),Q(a.$slots,"list-footer",ee(oe(i.scope.listFooter)))],40,Hu)),[[r]]):(O(),V("ul",{key:1,id:`vs${t.uid}__listbox`,role:"listbox",style:{display:"none",visibility:"hidden"}},null,8,qu))]),_:3},8,["name"]),Q(a.$slots,"footer",ee(oe(i.scope.footer)))],10,Ru)}const _n=ma(zu,[["render",Xu]]),Ju={class:"d-flex flex-row"},bn=Le({__name:"PlotIndicatorSelect",props:{modelValue:{required:!1,default:"",type:String},columns:{required:!0,type:Array},label:{required:!0,type:String}},emits:["update:modelValue","indicatorSelected"],setup(a,{emit:e}){const t=a,o=G("");function n(){e("indicatorSelected",o.value),e("update:modelValue",o.value)}function i(){o.value="",n()}return at(()=>{o.value=t.modelValue}),ae(()=>t.modelValue,r=>{o.value=r}),(r,s)=>{const l=Qt,u=An,c=ot;return O(),V("div",Ju,[I(l,{class:"flex-grow-1",label:a.label,"label-for":"indicatorSelector"},{default:B(()=>[I($(_n),{modelValue:o.value,"onUpdate:modelValue":s[0]||(s[0]=d=>o.value=d),options:a.columns,size:"sm",clearable:!1,"onOption:selected":n},null,8,["modelValue","options"])]),_:1},8,["label"]),I(c,{size:"sm",title:"Abort",class:"ms-1 mt-auto",variant:"secondary",onClick:i},{default:B(()=>[I(u)]),_:1})])}}}),Qu={class:"d-flex flex-col flex-xl-row justify-content-between mt-1"},ec=Le({__name:"PlotIndicator",props:{modelValue:{required:!0,type:Object},columns:{required:!0,type:Array}},emits:["update:modelValue"],setup(a,{emit:e}){const t=a,o=G($e()),n=G(pe.line),i=G(Object.keys(pe)),r=G(""),s=G(!1),l=G("");function u(){o.value=$e()}const c=W(()=>{if(s.value||!r.value)return{};const p={color:o.value,type:n.value};return l.value&&n.value===pe.line&&(p.fill_to=l.value),{[r.value]:p}});function d(){e("update:modelValue",c.value)}return ae(()=>t.modelValue,()=>{if([r.value]=Object.keys(t.modelValue),s.value=!1,r.value&&t.modelValue){const p=t.modelValue[r.value];o.value=p.color||$e(),n.value=p.type||pe.line,l.value=p.fill_to||""}},{immediate:!0}),Pn([o,n,l],()=>{d()},{debounce:200}),(p,m)=>{const v=Jt,h=Qt,g=Tn,y=Dn,_=hu,b=ot,f=Ln,S=In;return O(),V("div",null,[M("div",Qu,[I(h,{class:"col flex-grow-1",label:"Type","label-for":"plotTypeSelector"},{default:B(()=>[I(v,{id:"plotTypeSelector",modelValue:n.value,"onUpdate:modelValue":m[0]||(m[0]=x=>n.value=x),size:"sm",options:i.value},null,8,["modelValue","options"])]),_:1}),I(h,{label:"Color","label-for":"colsel",size:"sm",class:"ms-xl-1 col"},{default:B(()=>[I(S,null,{default:B(()=>[I(y,null,{default:B(()=>[I(g,{modelValue:o.value,"onUpdate:modelValue":m[1]||(m[1]=x=>o.value=x),type:"color",size:"sm",class:"p-0",style:{"max-width":"29px"}},null,8,["modelValue"])]),_:1}),I(g,{id:"colsel",modelValue:o.value,"onUpdate:modelValue":m[2]||(m[2]=x=>o.value=x),size:"sm",class:"flex-grow-1"},null,8,["modelValue"]),I(f,null,{default:B(()=>[I(b,{variant:"primary",size:"sm",onClick:u},{default:B(()=>[I(_)]),_:1})]),_:1})]),_:1})]),_:1})]),n.value===$(pe).line?(O(),J(bn,{key:0,modelValue:l.value,"onUpdate:modelValue":m[3]||(m[3]=x=>l.value=x),columns:a.columns,class:"mt-1",label:"Area chart - Fill to (leave empty for line chart)"},null,8,["modelValue","columns"])):j("",!0)])}}}),ya=a=>(Ao("data-v-76e05652"),a=a(),Po(),a),tc={key:0},ac={class:"col-mb-3"},oc=ya(()=>M("hr",null,null,-1)),nc=ya(()=>M("hr",null,null,-1)),ic={class:"d-flex flex-row mt-1"},rc=ya(()=>M("hr",null,null,-1)),sc={class:"d-flex flex-row"},lc={key:3,class:"col-mb-5 ms-1 mt-2"},uc=Le({__name:"PlotConfigurator",props:{columns:{required:!0,type:Array},asModal:{required:!1,default:!0,type:Boolean}},setup(a){const e=ga(),t=wo(),o=G("default"),n=G(""),i=G(!1),r=G(!1),s=G("main_plot"),l=G(),u=G(!0),c=W(()=>s.value==="main_plot"),d=W(()=>c.value?e.editablePlotConfig.main_plot:e.editablePlotConfig.subplots[s.value]),p=W(()=>["main_plot",...Object.keys(e.editablePlotConfig.subplots)]),m=W(()=>c.value?Object.keys(e.editablePlotConfig.main_plot):s.value in e.editablePlotConfig.subplots?Object.keys(e.editablePlotConfig.subplots[s.value]):[]);function v(C){const A=Object.keys(C)[0],N=C[A];c.value?e.editablePlotConfig.main_plot[A]={...N}:e.editablePlotConfig.subplots[s.value][A]={...N},e.editablePlotConfig={...e.editablePlotConfig},i.value=!1}const h=W({get(){return i.value?{}:n.value?{[n.value]:d.value[n.value]}:{}},set(C){Object.keys(C)[0]&&C?v(C):i.value=!1}}),g=W({get(){return JSON.stringify(e.editablePlotConfig,null,2)},set(C){try{l.value=JSON.parse(C),u.value=!0}catch{u.value=!1}}});function y(){c.value?(console.log(`Removing ${n.value} from MainPlot`),delete e.editablePlotConfig.main_plot[n.value]):(console.log(`Removing ${n.value} from ${s.value}`),delete e.editablePlotConfig.subplots[s.value][n.value]),e.editablePlotConfig={...e.editablePlotConfig},n.value=""}function _(C){e.editablePlotConfig.subplots={...e.editablePlotConfig.subplots,[C]:{}},s.value=C}function b(C){delete e.editablePlotConfig.subplots[C],s.value=p.value[p.value.length-1]}function f(C,A){e.editablePlotConfig.subplots[A]=e.editablePlotConfig.subplots[C],delete e.editablePlotConfig.subplots[C],s.value=A}function S(){e.editablePlotConfig=Ce(e.customPlotConfigs[e.plotConfigName])}function x(){l.value!==void 0&&u.value&&(e.editablePlotConfig=l.value)}async function w(){if(t.activeBot.isWebserverMode&&!t.activeBot.strategy.strategy){Aa("No strategy selected, can't load plot config.");return}try{await t.activeBot.getStrategyPlotConfig(),t.activeBot.strategyPlotConfig&&(e.editablePlotConfig=t.activeBot.strategyPlotConfig)}catch{Aa("Failed to load Plot configuration from Strategy.")}}function D(){e.saveCustomPlotConfig(o.value,e.editablePlotConfig)}function L(C){i.value=!1,C&&(v({[C]:{color:$e()}}),n.value=C)}return ae(s,()=>{n.value=""}),ae(()=>e.plotConfigName,()=>{n.value=""}),at(()=>{e.editablePlotConfig=Ce(e.plotConfig),e.isEditing=!0,o.value=e.plotConfigName}),On(()=>{e.isEditing=!1}),(C,A)=>{const N=Qt,R=Jt,H=ot,Oe=kn;return a.columns?(O(),V("div",tc,[I(N,{label:"Plot config name","label-for":"idPlotConfigName"},{default:B(()=>[I(yn,{"allow-edit":""})]),_:1}),M("div",ac,[oc,I(N,{label:"Target Plot","label-for":"FieldSel"},{default:B(()=>[I(Ho,{modelValue:s.value,"onUpdate:modelValue":A[1]||(A[1]=K=>s.value=K),"allow-edit":!c.value,"allow-add":"","editable-name":"plot configuration","align-vertical":"",onNew:_,onDelete:b,onRename:f},{default:B(()=>[I(R,{id:"FieldSel",modelValue:s.value,"onUpdate:modelValue":A[0]||(A[0]=K=>s.value=K),options:p.value,"select-size":5},null,8,["modelValue","options"])]),_:1},8,["modelValue","allow-edit"])]),_:1})]),nc,M("div",null,[I(N,{label:"Indicators in this plot","label-for":"selectedIndicators"},{default:B(()=>[I(R,{id:"selectedIndicators",modelValue:n.value,"onUpdate:modelValue":A[2]||(A[2]=K=>n.value=K),disabled:i.value,options:m.value,"select-size":4},null,8,["modelValue","disabled","options"])]),_:1})]),M("div",ic,[I(H,{variant:"secondary",title:"Remove indicator to plot",size:"sm",disabled:!n.value,class:"col",onClick:y},{default:B(()=>[ne(" Remove indicator ")]),_:1},8,["disabled"]),I(H,{variant:"primary",title:"Add indicator to plot",size:"sm",class:"ms-1 col",disabled:i.value,onClick:A[3]||(A[3]=K=>{i.value=!i.value,n.value=""})},{default:B(()=>[ne(" Add new indicator ")]),_:1},8,["disabled"])]),i.value?(O(),J(bn,{key:0,columns:a.columns,class:"mt-1",label:"Select indicator to add",onIndicatorSelected:L},null,8,["columns"])):j("",!0),n.value?(O(),J(ec,{key:1,modelValue:h.value,"onUpdate:modelValue":A[4]||(A[4]=K=>h.value=K),class:"mt-1",columns:a.columns},null,8,["modelValue","columns"])):j("",!0),rc,M("div",sc,[I(H,{class:"ms-1 col",variant:"secondary",size:"sm",disabled:i.value,title:"Reset to last saved configuration",onClick:S},{default:B(()=>[ne("Reset")]),_:1},8,["disabled"]),I(H,{disabled:$(t).activeBot.isWebserverMode&&$(t).activeBot.botApiVersion<2.23||!$(t).activeBot.isBotOnline||i.value,class:"ms-1 col",variant:"secondary",size:"sm",onClick:w},{default:B(()=>[ne(" From strategy ")]),_:1},8,["disabled"]),I(H,{id:"showButton",class:"ms-1 col",variant:"secondary",size:"sm",disabled:i.value,title:"Show configuration for easy transfer to a strategy",onClick:A[5]||(A[5]=K=>r.value=!r.value)},{default:B(()=>[ne(ie(r.value?"Hide":"Show"),1)]),_:1},8,["disabled"]),I(H,{class:"ms-1 col",variant:"primary",size:"sm","data-toggle":"tooltip",disabled:i.value,title:"Save configuration",onClick:D},{default:B(()=>[ne("Save")]),_:1},8,["disabled"])]),r.value?(O(),J(H,{key:2,class:"ms-1 mt-1",variant:"secondary",size:"sm",title:"Load configuration from text box below",onClick:x},{default:B(()=>[ne("Load from String")]),_:1})):j("",!0),r.value?(O(),V("div",lc,[I(Oe,{id:"TextArea",modelValue:g.value,"onUpdate:modelValue":A[6]||(A[6]=K=>g.value=K),class:"textArea",size:"sm",state:u.value},null,8,["modelValue","state"])])):j("",!0)])):j("",!0)}}});const So=Xt(uc,[["__scopeId","data-v-76e05652"]]),cc=a=>(Ao("data-v-fb0ac1aa"),a=a(),Po(),a),dc={class:"d-flex h-100"},pc={class:"flex-fill w-100 flex-column align-items-stretch d-flex h-100"},hc={class:"d-flex me-0"},fc={class:"ms-2 d-flex flex-wrap flex-md-nowrap align-items-center w-auto"},vc={class:"ms-2 text-nowrap"},gc={class:"d-flex flex-row flex-wrap"},mc={key:0,class:"ms-2 text-nowrap",title:"Long entry signals"},yc={key:1,class:"ms-2 text-nowrap",title:"Long exit signals"},_c={key:2,class:"ms-2 text-nowrap"},bc={key:3,class:"ms-2 text-nowrap"},Sc={class:"ms-auto d-flex align-items-center w-auto"},xc=cc(()=>M("span",{class:"text-nowrap"},"Heikin Ashi",-1)),Cc={class:"ms-2"},wc={class:"ms-2 me-0 me-md-1"},Ac={class:"me-1 ms-1 h-100"},Pc={key:1,class:"m-auto"},Tc={key:1,style:{"font-size":"1.5rem"}},Dc={key:0,class:"w-25 config-sidebar"},Lc=Le({__name:"CandleChartContainer",props:{trades:{required:!1,default:()=>[],type:Array},availablePairs:{required:!0,type:Array},timeframe:{required:!0,type:String},historicView:{required:!1,default:!1,type:Boolean},plotConfigModal:{required:!1,default:!0,type:Boolean},timerange:{required:!1,default:"",type:String},strategy:{required:!1,default:"",type:String},freqaiModel:{required:!1,default:void 0,type:String},sliderPosition:{required:!1,type:Object,default:()=>{}}},setup(a){const e=a,t=Mn(),o=wo(),n=ga(),i=G(""),r=G(),s=W(()=>{var g,y;return e.historicView?(g=o.activeBot.history[`${i.value}__${e.timeframe}`])==null?void 0:g.data:(y=o.activeBot.candleData[`${i.value}__${e.timeframe}`])==null?void 0:y.data}),l=W(()=>{var g;return e.strategy||((g=s.value)==null?void 0:g.strategy)||""}),u=W(()=>s.value?s.value.columns:[]),c=W(()=>s.value&&s.value.data.length>0),d=W(()=>e.historicView?o.activeBot.historyStatus===Ee.loading:o.activeBot.candleDataStatus===Ee.loading),p=W(()=>{switch(e.historicView?o.activeBot.historyStatus:o.activeBot.candleDataStatus){case Ee.loading:return"Loading...";case Ee.success:return"No data available";case Ee.error:return"Failed to load data";default:return"Unknown"}}),m=G(!1);function v(){e.plotConfigModal?m.value=!m.value:r.value=!r.value}function h(){console.log("refresh",i.value,e.timeframe),i.value&&e.timeframe&&(e.historicView?o.activeBot.getPairHistory({pair:i.value,timeframe:e.timeframe,timerange:e.timerange,strategy:e.strategy,freqaimodel:e.freqaiModel}):o.activeBot.getPairCandles({pair:i.value,timeframe:e.timeframe}))}return ae(()=>e.availablePairs,()=>{e.availablePairs.find(g=>g===i.value)||([i.value]=e.availablePairs,h())}),ae(()=>o.activeBot.selectedPair,()=>{i.value=o.activeBot.selectedPair,h()}),at(()=>{r.value=e.plotConfigModal,o.activeBot.selectedPair?i.value=o.activeBot.selectedPair:e.availablePairs.length>0&&([i.value]=e.availablePairs),n.plotConfigChanged(),c.value||h()}),(g,y)=>{const _=Nn,b=ot,f=Bn,S=Fl,x=En,w=Vn;return O(),V("div",dc,[M("div",pc,[M("div",hc,[M("div",fc,[M("span",vc,ie(l.value)+" | "+ie(a.timeframe||""),1),I($(_n),{modelValue:i.value,"onUpdate:modelValue":y[0]||(y[0]=D=>i.value=D),class:"ms-2",options:a.availablePairs,style:{"min-width":"7em"},size:"sm",clearable:!1,onInput:h},null,8,["modelValue","options"]),I(b,{class:"ms-2",disabled:!i.value,size:"sm",onClick:h},{default:B(()=>[I(_)]),_:1},8,["disabled"]),M("div",gc,[s.value?(O(),V("small",mc,"Long signals: "+ie(s.value.enter_long_signals||s.value.buy_signals),1)):j("",!0),s.value?(O(),V("small",yc,"Long exit: "+ie(s.value.exit_long_signals||s.value.sell_signals),1)):j("",!0),s.value&&s.value.enter_short_signals?(O(),V("small",_c,"Short entries: "+ie(s.value.enter_short_signals),1)):j("",!0),s.value&&s.value.exit_short_signals?(O(),V("small",bc,"Short exits: "+ie(s.value.exit_short_signals),1)):j("",!0)])]),M("div",Sc,[I(f,{modelValue:$(t).useHeikinAshiCandles,"onUpdate:modelValue":y[1]||(y[1]=D=>$(t).useHeikinAshiCandles=D)},{default:B(()=>[xc]),_:1},8,["modelValue"]),M("div",Cc,[I(yn)]),M("div",wc,[I(b,{size:"sm",title:"Plot configurator",onClick:v},{default:B(()=>[I(S,{width:"12",height:"12"})]),_:1})])])]),M("div",Ac,[c.value?(O(),J(su,{key:0,dataset:s.value,trades:a.trades,"plot-config":$(n).plotConfig,"heikin-ashi":$(t).useHeikinAshiCandles,"use-u-t-c":$(t).timezone==="UTC",theme:$(t).chartTheme,"slider-position":a.sliderPosition},null,8,["dataset","trades","plot-config","heikin-ashi","use-u-t-c","theme","slider-position"])):(O(),V("div",Pc,[d.value?(O(),J(x,{key:0,label:"Spinning"})):(O(),V("div",Tc,ie(p.value),1))]))])]),I(Co,{name:"fade",mode:"in-out"},{default:B(()=>[a.plotConfigModal?j("",!0):qe((O(),V("div",Dc,[I(So,{columns:u.value,"as-modal":!1},null,8,["columns"])],512)),[[Vt,r.value]])]),_:1}),a.plotConfigModal?(O(),J(w,{key:0,id:"plotConfiguratorModal",modelValue:m.value,"onUpdate:modelValue":y[2]||(y[2]=D=>m.value=D),title:"Plot Configurator","ok-only":"","hide-backdrop":""},{default:B(()=>[m.value?(O(),J(So,{key:0,columns:u.value},null,8,["columns"])):j("",!0)]),_:1},8,["modelValue"])):j("",!0)])}}});const Vc=Xt(Lc,[["__scopeId","data-v-fb0ac1aa"]]);export{Vc as C};
//# sourceMappingURL=CandleChartContainer-38d35f60.js.map
