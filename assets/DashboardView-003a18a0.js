import{D as g,T as F}from"./DraggableContainer-f99a0410.js";import{C as H,P as J,T as K}from"./TradesLog-ce01201a.js";import{d as E,u as G,h as d,o as v,i as D,w as o,a as b,j as i,k as T,v as O,c as R,y as M,f as N,a7 as W,x as Z,E as q,r as Q,H as x,aZ as S,z as X,J as $,b as t,K as k}from"./index-8c4b8b6b.js";import{P as U,a as j}from"./InfoBox.vue_vue_type_script_setup_true_lang-cf02f3fe.js";import{T as z}from"./TradeList-8d080513.js";import"./installCanvasRenderer-3ce2e16e.js";import"./chartZoom-888b3aed.js";const Y={class:"d-flex flex-row"},ee={key:0},ae=["title"],te={class:"text-small"},oe={key:0},le={class:"text-profit"},se={class:"text-loss"},re=E({__name:"BotComparisonList",setup(A){const a=G(),w=[{key:"botName",label:"Bot"},{key:"trades",label:"Trades"},{key:"profitOpen",label:"Open Profit"},{key:"profitClosed",label:"Closed Profit"},{key:"balance",label:"Balance"},{key:"winVsLoss",label:"W/L"}],P=d(()=>{const B=[],n={botId:void 0,botName:"Summary",profitClosed:0,profitClosedRatio:void 0,profitOpen:0,profitOpenRatio:void 0,stakeCurrency:"USDT",wins:0,losses:0};return Object.entries(a.allProfit).forEach(([l,s])=>{var f,p,y,h,_,V,m;const e=a.allOpenTrades[l].reduce((L,r)=>L+r.stake_amount,0),u=a.allOpenTrades[l].reduce((L,r)=>L+(r.total_profit_ratio??r.profit_ratio)*r.stake_amount,0)/e,c=a.allOpenTrades[l].reduce((L,r)=>L+(r.total_profit_abs??r.profit_abs??0),0);B.push({botId:l,botName:a.availableBots[l].botName,trades:`${a.allOpenTradeCount[l]} / ${((f=a.allBotState[l])==null?void 0:f.max_open_trades)||"N/A"}`,profitClosed:s.profit_closed_coin,profitClosedRatio:s.profit_closed_ratio||0,stakeCurrency:((p=a.allBotState[l])==null?void 0:p.stake_currency)||"",profitOpenRatio:u,profitOpen:c,wins:s.winning_trades,losses:s.losing_trades,balance:((y=a.allBalance[l])==null?void 0:y.total_bot)??((h=a.allBalance[l])==null?void 0:h.total),stakeCurrencyDecimals:((_=a.allBotState[l])==null?void 0:_.stake_currency_decimals)||3,isDryRun:(V=a.allBotState[l])==null?void 0:V.dry_run}),s.profit_closed_coin!==void 0&&a.botStores[l].isSelected&&(n.profitClosed+=s.profit_closed_coin,n.profitOpen+=c,n.wins+=s.winning_trades,n.losses+=s.losing_trades,n.stakeCurrency=((m=a.allBotState[l])==null?void 0:m.stake_currency)||n.stakeCurrency)}),B.push(n),B});return(B,n)=>{const l=W,s=Z;return v(),D(s,{ref:"tradesTable",small:"",hover:"","show-empty":"","primary-key":"botId",items:P.value,fields:w},{"cell(botName)":o(e=>[b("div",Y,[e.item.botId&&i(a).botCount>1?(v(),D(l,{key:0,modelValue:i(a).botStores[e.item.botId??""].isSelected,"onUpdate:modelValue":u=>i(a).botStores[e.item.botId??""].isSelected=u,title:"Show bot in Dashboard"},null,8,["modelValue","onUpdate:modelValue"])):T("",!0),b("span",null,O(e.value),1)])]),"cell(profitOpen)":o(({item:e})=>[e.profitOpen&&e.botId!="Summary"?(v(),D(U,{key:0,"profit-ratio":e.profitOpenRatio,"profit-abs":e.profitOpen,"stake-currency":e.stakeCurrency},null,8,["profit-ratio","profit-abs","stake-currency"])):T("",!0)]),"cell(profitClosed)":o(({item:e})=>[e.profitClosed&&e.botId!="Summary"?(v(),D(U,{key:0,"profit-ratio":e.profitClosedRatio,"profit-abs":e.profitClosed,"stake-currency":e.stakeCurrency},null,8,["profit-ratio","profit-abs","stake-currency"])):T("",!0)]),"cell(balance)":o(({item:e})=>[e.balance?(v(),R("div",ee,[b("span",{title:e.stakeCurrency},O(i(M)(e.balance??0,e.stakeCurrencyDecimals)),9,ae),b("span",te,O(` ${e.stakeCurrency}${e.isDryRun?" (dry)":""}`),1)])):T("",!0)]),"cell(winVsLoss)":o(({item:e})=>[e.losses!==void 0?(v(),R("div",oe,[b("span",le,O(e.wins),1),N(" / "),b("span",se,O(e.losses),1)])):T("",!0)]),_:1},8,["items"])}}}),ie={class:"d-flex justify-content-center"},ne={class:"d-flex justify-content-center"},_e=E({__name:"DashboardView",setup(A){const a=G(),w=q(),P=Q(""),B=m=>{P.value=m},n=d(()=>["","sm","md","lg","xl"].includes(P.value)),l=d(()=>w.layoutLocked||!n.value),s=d(()=>n.value?w.dashboardLayout:[...w.getDashboardLayoutSm]),e=m=>{n.value&&(console.log("newlayout",m),console.log("saving dashboard"),w.dashboardLayout=m)},u=d(()=>x(s.value,S.dailyChart)),c=d(()=>x(s.value,S.botComparison)),f=d(()=>x(s.value,S.allOpenTrades)),p=d(()=>x(s.value,S.allClosedTrades)),y=d(()=>x(s.value,S.cumChartChart)),h=d(()=>x(s.value,S.profitDistributionChart)),_=d(()=>x(s.value,S.tradesLogChart)),V=d(()=>({sm:w.getDashboardLayoutSm}));return X(async()=>{a.allGetDaily({timescale:30}),a.activeBot.getOpenTrades(),a.activeBot.getProfit()}),(m,L)=>{const r=$("grid-item"),I=$("grid-layout");return v(),D(I,{class:"h-100 w-100","row-height":50,layout:s.value,"vertical-compact":!1,margin:[5,5],"responsive-layouts":V.value,"is-resizable":!l.value,"is-draggable":!l.value,responsive:!0,"prevent-collision":!0,cols:{lg:12,md:12,sm:12,xs:4,xxs:2},"col-num":12,onLayoutUpdated:e,"onUpdate:breakpoint":B},{default:o(({gridItemProps:C})=>[t(r,k(C,{i:u.value.i,x:u.value.x,y:u.value.y,w:u.value.w,h:u.value.h,"min-w":3,"min-h":4,"drag-allow-from":".drag-header"}),{default:o(()=>[t(g,{header:`Daily Profit ${i(a).botCount>1?"combined":""}`},{default:o(()=>[i(a).allDailyStatsSelectedBots?(v(),D(F,{key:0,"daily-stats":i(a).allDailyStatsSelectedBots,"show-title":!1},null,8,["daily-stats"])):T("",!0)]),_:1},8,["header"])]),_:2},1040,["i","x","y","w","h"]),t(r,k(C,{i:c.value.i,x:c.value.x,y:c.value.y,w:c.value.w,h:c.value.h,"min-w":3,"min-h":4,"drag-allow-from":".drag-header"}),{default:o(()=>[t(g,{header:"Bot comparison"},{default:o(()=>[t(re)]),_:1})]),_:2},1040,["i","x","y","w","h"]),t(r,k(C,{i:f.value.i,x:f.value.x,y:f.value.y,w:f.value.w,h:f.value.h,"min-w":3,"min-h":4,"drag-allow-from":".drag-header"}),{default:o(()=>[t(g,null,{header:o(()=>[b("div",ie,[N(" Open Trades "),t(j,{class:"ms-2",hint:"Open trades of all selected bots. Click on a trade to go to the trade page for that trade/bot."})])]),default:o(()=>[t(z,{"active-trades":"",trades:i(a).allOpenTradesSelectedBots,"multi-bot-view":""},null,8,["trades"])]),_:1})]),_:2},1040,["i","x","y","w","h"]),t(r,k(C,{i:y.value.i,x:y.value.x,y:y.value.y,w:y.value.w,h:y.value.h,"min-w":3,"min-h":4,"drag-allow-from":".drag-header"}),{default:o(()=>[t(g,{header:"Cumulative Profit"},{default:o(()=>[t(H,{trades:i(a).allTradesSelectedBots,"open-trades":i(a).allOpenTradesSelectedBots,"show-title":!1},null,8,["trades","open-trades"])]),_:1})]),_:2},1040,["i","x","y","w","h"]),t(r,k(C,{i:p.value.i,x:p.value.x,y:p.value.y,w:p.value.w,h:p.value.h,"min-w":3,"min-h":4,"drag-allow-from":".drag-header"}),{default:o(()=>[t(g,null,{header:o(()=>[b("div",ne,[N(" Closed Trades "),t(j,{class:"ms-2",hint:"Closed trades for all selected bots. Click on a trade to go to the trade page for that trade/bot."})])]),default:o(()=>[t(z,{"active-trades":!1,"show-filter":"",trades:i(a).allClosedTradesSelectedBots,"multi-bot-view":""},null,8,["trades"])]),_:1})]),_:2},1040,["i","x","y","w","h"]),t(r,k(C,{i:h.value.i,x:h.value.x,y:h.value.y,w:h.value.w,h:h.value.h,"min-w":3,"min-h":4,"drag-allow-from":".drag-header"}),{default:o(()=>[t(g,{header:"Profit Distribution"},{default:o(()=>[t(J,{trades:i(a).allTradesSelectedBots,"show-title":!1},null,8,["trades"])]),_:1})]),_:2},1040,["i","x","y","w","h"]),t(r,k(C,{i:_.value.i,x:_.value.x,y:_.value.y,w:_.value.w,h:_.value.h,"min-w":3,"min-h":4,"drag-allow-from":".drag-header"}),{default:o(()=>[t(g,{header:"Trades Log"},{default:o(()=>[t(K,{trades:i(a).allTradesSelectedBots,"show-title":!1},null,8,["trades"])]),_:1})]),_:2},1040,["i","x","y","w","h"])]),_:1},8,["layout","responsive-layouts","is-resizable","is-draggable"])}}});export{_e as default};
//# sourceMappingURL=DashboardView-003a18a0.js.map
